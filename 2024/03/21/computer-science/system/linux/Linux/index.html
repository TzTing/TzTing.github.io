<!-- build time:Tue Apr 23 2024 00:46:46 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/tzblog/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/tzblog/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="一些记录" href="https://mytingting.gitee.io/tzblog/rss.xml"><link rel="alternate" type="application/atom+xml" title="一些记录" href="https://mytingting.gitee.io/tzblog/atom.xml"><link rel="alternate" type="application/json" title="一些记录" href="https://mytingting.gitee.io/tzblog/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/tzblog/css/app.css?v=0.2.5"><meta name="keywords" content="linux"><link rel="canonical" href="https://mytingting.gitee.io/tzblog/2024/03/21/computer-science/system/linux/Linux/"><title>Linux 使用 - 系统 - 计算机科学 | Tz = 一些记录 = = 编程、羽毛球、游戏、骑行 =</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">Linux 使用</h1><div class="meta"><span class="item" title="创建时间：2024-03-21 20:46:25"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-03-21T20:46:25+08:00">2024-03-21</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>26k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>23 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/tzblog/" rel="start">Tz</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tzting.github.io/images/sky9.jpg"></li><li class="item" data-background-image="https://tzting.github.io/images/sky6.jpg"></li><li class="item" data-background-image="https://tzting.github.io/images/sky7.jpg"></li><li class="item" data-background-image="https://tzting.github.io/images/sky1.jpg"></li><li class="item" data-background-image="https://tzting.github.io/images/sky4.jpg"></li><li class="item" data-background-image="https://tzting.github.io/images/sky2.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/tzblog/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/tzblog/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/tzblog/categories/computer-science/%E7%B3%BB%E7%BB%9F/" itemprop="item" rel="index" title="分类于 系统"><span itemprop="name">系统</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://mytingting.gitee.io/tzblog/2024/03/21/computer-science/system/linux/Linux/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/tzblog/images/avatar.jpg"><meta itemprop="name" content="Tz"><meta itemprop="description" content="= 编程、羽毛球、游戏、骑行 =, 君将自由, 我心亦然"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="一些记录"></span><div class="body md" itemprop="articleBody"><h1 id="linux-使用"><a class="anchor" href="#linux-使用">#</a> Linux 使用</h1><h2 id="一-介绍"><a class="anchor" href="#一-介绍">#</a> 一、介绍</h2><p>Linux，通常称为 GNU/Linux（以强调其与 GNU 软件包的兼容性和合作），是一种免费使用和自由传播的类 UNIX 操作系统。它的内核由林纳斯・本纳第克特・托瓦兹（Linus Benedict Torvalds）于 1991 年 10 月 5 日首次发布。Linux 操作系统受到 Minix 和 Unix 的启发，基于 POSIX 标准，支持多用户、多任务、多线程和多 CPU。它能够运行大多数 Unix 工具软件、应用程序和网络协议，并且支持 32 位和 64 位硬件。</p><h2 id="二-vi-vim-使用"><a class="anchor" href="#二-vi-vim-使用">#</a> 二、VI / VIM 使用</h2><h3 id="进入vi"><a class="anchor" href="#进入vi">#</a> 进入 vi</h3><p>在系统提示符号输入 vi 及文件名称后，就进入 vi 全屏幕编辑画面：$ vi myfile。不过有一点要特别注意，就是您进入 vi 之后，是处于「命令行模式（command mode）」，您要切换到「插入模式（Insert mode）」才能够输入文字。初次使用 vi 的人都会想先用上下左右键移动光标，结果电脑一直哔哔叫，把自己气个半死，所以进入 vi 后，先不要乱动，转换到「插入模式（Insert mode）」再说吧！</p><h3 id="切换至插入模式insert-mode编辑文件"><a class="anchor" href="#切换至插入模式insert-mode编辑文件">#</a> 切换至插入模式（Insert mode）编辑文件</h3><p>在「命令行模式（command mode）」下按一下字母「i」就可以进入「插入模式（Insert mode）」，这时候你就可以开始输入文字了。</p><h3 id="insert-的切换"><a class="anchor" href="#insert-的切换">#</a> Insert 的切换</h3><p>您目前处于「插入模式（Insert mode）」，您就只能一直输入文字，如果您发现输错了字！想用光标键往回移动，将该字删除，就要先按一下「ESC」键转到「命令行模式（command mode）」再删除文字。</p><h3 id="退出vi及保存文件"><a class="anchor" href="#退出vi及保存文件">#</a> 退出 vi 及保存文件</h3><p>在「命令行模式（command mode）」下，按一下「：」冒号键进入「Last line mode」，例如：<br>:w filename （输入 「w filename」将文章以指定的文件名 filename 保存）<br>:wq (输入「wq」，存盘并退出 vi)<br>:q! (输入 q!， 不存盘强制退出 vi)</p><h3 id="命令行模式command-mode功能键"><a class="anchor" href="#命令行模式command-mode功能键">#</a> 命令行模式（command mode）功能键</h3><ol><li>插入模式<br>按「i」切换进入插入模式「insert mode」，按 “i” 进入插入模式后是从光标当前位置开始输入文件；<br>按「a」进入插入模式后，是从目前光标所在位置的下一个位置开始输入文字；<br>按「o」进入插入模式后，是插入新的一行，从行首开始输入文字。</li><li>从插入模式切换为命令行模式<br>按「ESC」键。</li><li>移动光标<br>vi 可以直接用键盘上的光标来上下左右移动，但正规的 vi 是用小写英文字母「h」、「j」、「k」、「l」，分别控制光标左、下、上、右移一格。<br>按「ctrl」+「b」：屏幕往 “后” 移动一页。<br>按「ctrl」+「f」：屏幕往 “前” 移动一页。<br>按「ctrl」+「u」：屏幕往 “后” 移动半页。<br>按「ctrl」+「d」：屏幕往 “前” 移动半页。<br>按数字「0」：移到文章的开头。<br>按「G」：移动到文章的最后。<br>按「$」：移动到光标所在行的 “行尾”。<br>按「^」：移动到光标所在行的 “行首”<br>按「w」：光标跳到下个字的开头<br>按「e」：光标跳到下个字的字尾<br>按「b」：光标回到上个字的开头<br>按「#l」：光标移到该行的第 #个位置，如：5l,56l。</li><li>删除文字<br>「x」：每按一次，删除光标所在位置的 “后面” 一个字符。<br>「#x」：例如，「6x」表示删除光标所在位置的 “后面” 6 个字符。<br>「X」：大写的 X，每按一次，删除光标所在位置的 “前面” 一个字符。<br>「#X」：例如，「20X」表示删除光标所在位置的 “前面” 20 个字符。<br>「dd」：删除光标所在行。<br>「#dd」：从光标所在行开始删除 #行</li><li>复制<br>「yw」：将光标所在之处到字尾的字符复制到缓冲区中。<br>「#yw」：复制 #个字到缓冲区<br>「yy」：复制光标所在行到缓冲区。<br>「#yy」：例如，「6yy」表示拷贝从光标所在的该行 “往下数” 6 行文字。<br>「p」：将缓冲区内的字符贴到光标所在位置。注意：所有与 “y” 有关的复制命令都必须与 “p” 配合才能完成复制与粘贴功能。</li><li>替换<br>「r」：替换光标所在处的字符。<br>「R」：替换光标所到之处的字符，直到按下「ESC」键为止。</li><li>回复上一次操作<br>「u」：如果您误执行一个命令，可以马上按下「u」，回到上一个操作。按多次 “u” 可以执行多次回复。</li><li>更改<br>「cw」：更改光标所在处的字到字尾处<br>「c#w」：例如，「c3w」表示更改 3 个字</li><li>跳至指定的行<br>「ctrl」+「g」列出光标所在行的行号。<br>「#G」：例如，「15G」，表示移动光标至文章的第 15 行行首。</li></ol><h3 id="last-line-mode下命令简介"><a class="anchor" href="#last-line-mode下命令简介">#</a> Last line mode 下命令简介</h3><p>在使用「last line mode」之前，请记住先按「ESC」键确定您已经处于「command mode」下后，再按「：」冒号即可进入「last line mode」。</p><ol><li>列出行号<br>「set nu」：输入「set nu」后，会在文件中的每一行前面列出行号。</li><li>跳到文件中的某一行<br>「#」：「#」号表示一个数字，在冒号后输入一个数字，再按回车键就会跳到该行了，如输入数字 15，再回车，就会跳到文章的第 15 行。</li><li>查找字符<br>「/ 关键字」：先按「/」键，再输入您想寻找的字符，如果第一次找的关键字不是您想要的，可以一直按「n」会往后寻找到您要的关键字为止。<br>「? 关键字」：先按「?」键，再输入您想寻找的字符，如果第一次找的关键字不是您想要的，可以一直按「n」会往前寻找到您要的关键字为止。</li><li>保存文件<br>「w」：在冒号输入字母「w」就可以将文件保存起来。</li><li>离开 vi<br>「q」：按「q」就是退出，如果无法离开 vi，可以在「q」后跟一个「!」强制离开 vi。<br>「qw」：一般建议离开时，搭配「w」一起使用，这样在退出的时候还可以保存文件。</li></ol><h3 id="vi命令列表"><a class="anchor" href="#vi命令列表">#</a> vi 命令列表</h3><ol><li>下表列出命令模式下的一些键的功能：</li></ol><table><thead><tr><th>键位</th><th>功能</th></tr></thead><tbody><tr><td>h</td><td>左移光标一个字符</td></tr><tr><td>l</td><td>右移光标一个字符</td></tr><tr><td>k</td><td>光标上移一行</td></tr><tr><td>j</td><td>光标下移一行</td></tr><tr><td>^</td><td>光标移动至行首</td></tr><tr><td>0（数字 “0”）</td><td>光标移至文章的开头</td></tr><tr><td>G</td><td>光标移至文章的最后</td></tr><tr><td>$</td><td>光标移动至行尾</td></tr><tr><td>Ctrl+f</td><td>向前翻屏</td></tr><tr><td>Ctrl+b</td><td>向后翻屏</td></tr><tr><td>Ctrl+d</td><td>向前翻半屏</td></tr><tr><td>Ctrl+u</td><td>向后翻半屏</td></tr><tr><td>i</td><td>在光标位置前插入字符</td></tr><tr><td>a</td><td>在光标所在位置的后一个字符开始增加</td></tr><tr><td>o</td><td>插入新的一行，从行首开始输入</td></tr><tr><td>ESC</td><td>从输入状态退至命令状态</td></tr><tr><td>x</td><td>删除光标后面的字符</td></tr><tr><td>#x</td><td>删除光标后的＃个字符</td></tr><tr><td>X（大写 X）</td><td>删除光标前面的字符</td></tr><tr><td>#X</td><td>删除光标前面的 #个字符</td></tr><tr><td>dd</td><td>删除光标所在的行</td></tr><tr><td>#dd</td><td>删除从光标所在行数的 #行</td></tr><tr><td>yw</td><td>复制光标所在位置的一个字</td></tr><tr><td>#yw</td><td>复制光标所在位置的 #个字</td></tr><tr><td>yy</td><td>复制光标所在位置的一行</td></tr><tr><td>#yy</td><td>复制从光标所在行数的 #行</td></tr><tr><td>p</td><td>粘贴</td></tr><tr><td>u</td><td>取消操作</td></tr><tr><td>cw</td><td>更改光标所在位置的一个字</td></tr><tr><td>#cw</td><td>更改光标所在位置的 #个字</td></tr></tbody></table><ol start="2"><li>下表列出行命令模式下的一些指令</li></ol><table><thead><tr><th>键位</th><th>功能</th></tr></thead><tbody><tr><td>w filename</td><td>储存正在编辑的文件为 filename</td></tr><tr><td>wq filename</td><td>储存正在编辑的文件为 filename，并退出 vi</td></tr><tr><td>q!</td><td>放弃所有修改，退出 vi</td></tr><tr><td>set nu</td><td>显示行号</td></tr><tr><td>/ 或？</td><td>查找，在 / 后输入要查找的内容</td></tr><tr><td>n 与 / 或？一起使用</td><td>如果查找的内容不是想要找的关键字，按 n 或向后（与 / 联用）或向前（与？联用）继续查找，直到找到为止</td></tr></tbody></table><h2 id="三-使用物理卷pv-逻辑卷lv-卷组vg管理管理的方式挂载硬盘"><a class="anchor" href="#三-使用物理卷pv-逻辑卷lv-卷组vg管理管理的方式挂载硬盘">#</a> 三、使用物理卷 (PV)、逻辑卷 (LV)、卷组 (VG) 管理管理的方式挂载硬盘</h2><h3 id="相关概念"><a class="anchor" href="#相关概念">#</a> 相关概念</h3><p>逻辑卷是使用逻辑卷组管理 (Logic Volume Manager) 创建出来的设备，如果要了解逻辑卷，那么首先需要了解逻辑卷管理中的一些概念。</p><ul><li>物理卷（Physical Volume,PV）：也就是物理磁盘分区，如果想要使用 LVM 来管理这个分区，可以使用 fdisk 将其 ID 改为 LVM 可以识别的值，即 8e。</li><li>卷组（Volume Group,VG）：PV 的集合</li><li>逻辑卷（Logic Volume,LV）：VG 中画出来的一块逻辑磁盘</li></ul><p>了解概念之后，逻辑卷是如何产生的就很清晰了：物理磁盘或者磁盘分区转换为物理卷，一个或多个物理卷聚集形成一个或多个卷组，而逻辑卷就是从某个卷组里面抽象出来的一块磁盘空间。具体架构如下：</p><p><img data-src=".%5Clinux-1.png" alt=""></p><h3 id="为什么要使用逻辑卷"><a class="anchor" href="#为什么要使用逻辑卷">#</a> 为什么要使用逻辑卷</h3><p>对于物理磁盘，我们直接分区、格式化为文件系统之后就可以使用，那为什么还需要使用逻辑卷的方式来管理磁盘呢？我认为主要有 2 个原因：</p><ul><li>业务上使用大容量的磁盘。举个例子，我们需要在 /data 下挂载 30TB 的存储，对于单个磁盘，是无法满足要求的，因为市面上没有那么大的单块磁盘。但是如果我们使用逻辑卷，将多个小容量的磁盘聚合为一个大的逻辑磁盘，就能满足需求。</li><li>扩展和收缩磁盘。在业务初期规划磁盘时，我们并不能完全知道需要分配多少磁盘空间是合理的，如果使用物理卷，后期无法扩展和收缩，如果使用逻辑卷，可以根据后期的需求量，手动扩展或收缩。</li></ul><h3 id="创建物理卷pv"><a class="anchor" href="#创建物理卷pv">#</a> 创建物理卷（PV）</h3><p>通过上面的逻辑卷架构图，可以知道，如果要创建逻辑卷，需要先有物理磁盘或者磁盘分区，然后使用物理磁盘或磁盘分区创建物理卷，再使用物理卷创建卷组，最后使用卷组创建逻辑卷。接下来一步一步创建逻辑卷。</p><p>创建物理卷是创建逻辑卷的第一步，创建物理卷相关命令有：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># pvcreate 用于创建物理卷</span></pre></td></tr><tr><td data-num="2"></td><td><pre>pvcreate /dev/sdb</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># pvdisplay、pvsca、pvs 用于查看物理卷 pvdisplay</span></pre></td></tr><tr><td data-num="5"></td><td><pre>pvdisplay</pre></td></tr><tr><td data-num="6"></td><td><pre>pvs</pre></td></tr><tr><td data-num="7"></td><td><pre>pvscan</pre></td></tr></table></figure><p>可以使用磁盘直接创建物理卷，也可以使用磁盘分区创建物理卷。两种方法稍微有些差距，下面进行说明。</p><ol><li>使用磁盘直接创建物理卷</li></ol><p>直接使用物理磁盘创建物理卷没有什么需要特别注意的，直接创建即可。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 使用 fdisk -l 确认磁盘，可以看到 /dev/sdb 未做分区处理</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># fdisk -l /dev/sdb</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>Disk /dev/sdb: <span class="token number">2147</span> MB, <span class="token number">2147483648</span> bytes, <span class="token number">4194304</span> sectors</pre></td></tr><tr><td data-num="5"></td><td><pre>Units <span class="token operator">=</span> sectors of <span class="token number">1</span> * <span class="token number">512</span> <span class="token operator">=</span> <span class="token number">512</span> bytes</pre></td></tr><tr><td data-num="6"></td><td><pre>Sector size <span class="token punctuation">(</span>logical/physical<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes</pre></td></tr><tr><td data-num="7"></td><td><pre>I/O size <span class="token punctuation">(</span>minimum/optimal<span class="token punctuation">)</span>: <span class="token number">512</span> bytes / <span class="token number">512</span> bytes</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment"># 使用 pvcreate 将 sdb 磁盘创建为物理卷</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># pvcreate /dev/sdb</span></pre></td></tr><tr><td data-num="10"></td><td><pre>  Physical volume <span class="token string">"/dev/sdb"</span> successfully created.</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment"># 使用 pvdisplay 确认物理卷信息</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># pvdisplay </span></pre></td></tr><tr><td data-num="13"></td><td><pre>  --- Physical volume ---</pre></td></tr><tr><td data-num="14"></td><td><pre>  PV Name               /dev/sda3</pre></td></tr><tr><td data-num="15"></td><td><pre>  VG Name               centos</pre></td></tr><tr><td data-num="16"></td><td><pre>  PV Size               <span class="token operator">&lt;</span><span class="token number">68.73</span> GiB / not usable <span class="token number">4.00</span> MiB</pre></td></tr><tr><td data-num="17"></td><td><pre>  Allocatable           <span class="token function">yes</span> <span class="token punctuation">(</span>but full<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre>  PE Size               <span class="token number">4.00</span> MiB</pre></td></tr><tr><td data-num="19"></td><td><pre>  Total PE              <span class="token number">17593</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  Free PE               <span class="token number">0</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  Allocated PE          <span class="token number">17593</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  PV UUID               FRxq7G-1XWu-dPeW-wEwO-322y-M9XR-0ExebA</pre></td></tr><tr><td data-num="23"></td><td><pre>   </pre></td></tr><tr><td data-num="24"></td><td><pre>  <span class="token string">"/dev/sdb"</span> is a new physical volume of <span class="token string">"2.00 GiB"</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  --- NEW Physical volume ---</pre></td></tr><tr><td data-num="26"></td><td><pre>  PV Name               /dev/sdb</pre></td></tr><tr><td data-num="27"></td><td><pre>  VG Name               </pre></td></tr><tr><td data-num="28"></td><td><pre>  PV Size               <span class="token number">2.00</span> GiB</pre></td></tr><tr><td data-num="29"></td><td><pre>  Allocatable           NO</pre></td></tr><tr><td data-num="30"></td><td><pre>  PE Size               <span class="token number">0</span>   </pre></td></tr><tr><td data-num="31"></td><td><pre>  Total PE              <span class="token number">0</span></pre></td></tr><tr><td data-num="32"></td><td><pre>  Free PE               <span class="token number">0</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  Allocated PE          <span class="token number">0</span></pre></td></tr><tr><td data-num="34"></td><td><pre>  PV UUID               nsL75f-o3fD-apyz-SSY0-miUi-4RYf-zVLIT6</pre></td></tr><tr><td data-num="35"></td><td><pre>   <span class="token comment"># 也可以使用 pvs 确认物理卷信息，不过能够看到的信息比 pvdisplay 少</span></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># pvs </span></pre></td></tr><tr><td data-num="37"></td><td><pre>  PV         VG     Fmt  Attr PSize  PFree</pre></td></tr><tr><td data-num="38"></td><td><pre>  /dev/sda3  centos lvm2 a--  <span class="token number">68</span>.72g    <span class="token number">0</span> </pre></td></tr><tr><td data-num="39"></td><td><pre>  /dev/sdb          lvm2 ---   <span class="token number">2</span>.00g <span class="token number">2</span>.00g</pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr></table></figure><ol start="2"><li>使用磁盘分区创建物理卷</li></ol><p>磁盘分区之后，磁盘 id 为 83，如果要使用逻辑卷管理，需要将 id 改为 8e，才能创建物理卷。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#修改分区类型为 8e</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># fdisk /dev/sdc </span></pre></td></tr><tr><td data-num="3"></td><td><pre> Welcome to <span class="token function">fdisk</span> <span class="token punctuation">(</span>util-linux <span class="token number">2.23</span>.2<span class="token punctuation">)</span>.</pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre>Changes will remain <span class="token keyword">in</span> memory only, <span class="token keyword">until</span> you decide to <span class="token function">write</span> them.</pre></td></tr><tr><td data-num="6"></td><td><pre> Be careful before using the <span class="token function">write</span> command.</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre> Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> <span class="token builtin class-name">help</span><span class="token punctuation">)</span>: t     <span class="token comment">#t 可以修改分区代码</span></pre></td></tr><tr><td data-num="10"></td><td><pre> Partition number <span class="token punctuation">(</span><span class="token number">1,2</span>, default <span class="token number">2</span><span class="token punctuation">)</span>: <span class="token number">1</span>            <span class="token comment">#选择 1 分区进行修改</span></pre></td></tr><tr><td data-num="11"></td><td><pre> Hex code <span class="token punctuation">(</span>type L to list all codes<span class="token punctuation">)</span>: L          <span class="token comment">#如果不知道类型，可以用”L” 列出可以选择的修改代码</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre>  <span class="token number">0</span>  Empty           <span class="token number">24</span>  NEC DOS         <span class="token number">81</span>  Minix / old Lin bf  Solaris        </pre></td></tr><tr><td data-num="14"></td><td><pre>  <span class="token number">1</span>  FAT12           <span class="token number">27</span>  Hidden NTFS Win <span class="token number">82</span>  Linux swap / So c1  DRDOS/sec <span class="token punctuation">(</span>FAT-</pre></td></tr><tr><td data-num="15"></td><td><pre>  <span class="token number">2</span>  XENIX root      <span class="token number">39</span>  Plan <span class="token number">9</span>          <span class="token number">83</span>  Linux           c4  DRDOS/sec <span class="token punctuation">(</span>FAT-</pre></td></tr><tr><td data-num="16"></td><td><pre>  <span class="token number">3</span>  XENIX usr       3c  PartitionMagic  <span class="token number">84</span>  OS/2 hidden C:  c6  DRDOS/sec <span class="token punctuation">(</span>FAT-</pre></td></tr><tr><td data-num="17"></td><td><pre>  <span class="token number">4</span>  FAT16 <span class="token operator">&lt;</span>32M      <span class="token number">40</span>  Venix <span class="token number">80286</span>     <span class="token number">85</span>  Linux extended  c7  Syrinx         </pre></td></tr><tr><td data-num="18"></td><td><pre>  <span class="token number">5</span>  Extended        <span class="token number">41</span>  PPC PReP Boot   <span class="token number">86</span>  NTFS volume <span class="token builtin class-name">set</span> da  Non-FS data    </pre></td></tr><tr><td data-num="19"></td><td><pre>  <span class="token number">6</span>  FAT16           <span class="token number">42</span>  SFS             <span class="token number">87</span>  NTFS volume <span class="token builtin class-name">set</span> db  CP/M / CTOS / <span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="20"></td><td><pre>  <span class="token number">7</span>  HPFS/NTFS/exFAT 4d  QNX4.x          <span class="token number">88</span>  Linux plaintext de  Dell Utility   </pre></td></tr><tr><td data-num="21"></td><td><pre>  <span class="token number">8</span>  AIX             4e  QNX4.x 2nd part 8e  Linux LVM       <span class="token function">df</span>  BootIt         </pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token number">9</span>  AIX bootable    4f  QNX4.x 3rd part <span class="token number">93</span>  Amoeba          e1  DOS access     </pre></td></tr><tr><td data-num="23"></td><td><pre>  a  OS/2 Boot Manag <span class="token number">50</span>  OnTrack DM      <span class="token number">94</span>  Amoeba BBT      e3  DOS R/O        </pre></td></tr><tr><td data-num="24"></td><td><pre>  b  W95 FAT32       <span class="token number">51</span>  OnTrack DM6 Aux 9f  BSD/OS          e4  SpeedStor      </pre></td></tr><tr><td data-num="25"></td><td><pre>  c  W95 FAT32 <span class="token punctuation">(</span>LBA<span class="token punctuation">)</span> <span class="token number">52</span>  CP/M            a0  IBM Thinkpad hi eb  BeOS fs        </pre></td></tr><tr><td data-num="26"></td><td><pre>  e  W95 FAT16 <span class="token punctuation">(</span>LBA<span class="token punctuation">)</span> <span class="token number">53</span>  OnTrack DM6 Aux a5  FreeBSD         ee  GPT            </pre></td></tr><tr><td data-num="27"></td><td><pre>  f  W95 Ext<span class="token string">'d (LBA) 54  OnTrackDM6      a6  OpenBSD         ef  EFI (FAT-12/16/</span></pre></td></tr><tr><td data-num="28"></td><td><pre> 10  OPUS            55  EZ-Drive        a7  NeXTSTEP        f0  Linux/PA-RISC b</pre></td></tr><tr><td data-num="29"></td><td><pre> 11  Hidden FAT12    56  Golden Bow      a8  Darwin UFS      f1  SpeedStor      </pre></td></tr><tr><td data-num="30"></td><td><pre> 12  Compaq diagnost 5c  Priam Edisk     a9  NetBSD          f4  SpeedStor      </pre></td></tr><tr><td data-num="31"></td><td><pre> 14  Hidden FAT16 &lt;3 61  SpeedStor       ab  Darwin boot     f2  DOS secondary  </pre></td></tr><tr><td data-num="32"></td><td><pre> 16  Hidden FAT16    63  GNU HURD or Sys af  HFS / HFS+      fb  VMware VMFS    </pre></td></tr><tr><td data-num="33"></td><td><pre> 17  Hidden HPFS/NTF 64  Novell Netware  b7  BSDI fs         fc  VMware VMKCORE </pre></td></tr><tr><td data-num="34"></td><td><pre> 18  AST SmartSleep  65  Novell Netware  b8  BSDI swap       fd  Linux raid auto</pre></td></tr><tr><td data-num="35"></td><td><pre> 1b  Hidden W95 FAT3 70  DiskSecure Mult bb  Boot Wizard hid fe  LANstep        </pre></td></tr><tr><td data-num="36"></td><td><pre> 1c  Hidden W95 FAT3 75  PC/IX           be  Solaris boot    ff  BBT            </pre></td></tr><tr><td data-num="37"></td><td><pre> 1e  Hidden W95 FAT1 80  Old Minix      </pre></td></tr><tr><td data-num="38"></td><td><pre> Hex code (type L to list all codes): 8e         #选择8e</pre></td></tr><tr><td data-num="39"></td><td><pre> Changed type of partition 'Linux<span class="token string">' to '</span>Linux LVM'</pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> <span class="token builtin class-name">help</span><span class="token punctuation">)</span>: w               <span class="token comment"># 保存</span></pre></td></tr><tr><td data-num="42"></td><td><pre> The partition table has been altered<span class="token operator">!</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>Calling ioctl<span class="token punctuation">(</span><span class="token punctuation">)</span> to re-read partition table.</pre></td></tr><tr><td data-num="45"></td><td><pre> Syncing disks.</pre></td></tr><tr><td data-num="46"></td><td><pre> <span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr><tr><td data-num="47"></td><td><pre> </pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token comment">#接着进行创建物理卷（PV）</span></pre></td></tr><tr><td data-num="50"></td><td><pre>pvcreate /dev/sdc1</pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre>pvcreate /dev/sdc2</pre></td></tr></table></figure><h3 id="创建-扩容卷组"><a class="anchor" href="#创建-扩容卷组">#</a> 创建、扩容卷组</h3><ol><li>创建卷组</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 使用 vgcreate 创建卷组</span></pre></td></tr><tr><td data-num="2"></td><td><pre>vgcreate VG_NAME device1 <span class="token punctuation">..</span>. devicen</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment"># 使用 vgdosplay、vgscan、vgs 命令查看卷组</span></pre></td></tr><tr><td data-num="5"></td><td><pre>vgdisplay</pre></td></tr><tr><td data-num="6"></td><td><pre>vgscan</pre></td></tr><tr><td data-num="7"></td><td><pre>vgs</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">## 演示创建卷组</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 使用 vgcreate 创建卷组 VG_TEST, 包含物理卷：/dev/sdb 和 /dev/sdc1</span></pre></td></tr><tr><td data-num="13"></td><td><pre>vgcreate VG_TEST /dev/sdb /dev/sdc1</pre></td></tr><tr><td data-num="14"></td><td><pre>  Volume group <span class="token string">"VG_TEST"</span> successfully created</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment"># 查看方法一：使用 vgdisplay 查看卷组信息 [root@masterdb ~]# vgdisplay</span></pre></td></tr><tr><td data-num="16"></td><td><pre>  --- Volume group ---</pre></td></tr><tr><td data-num="17"></td><td><pre>  VG Name               VG_TEST</pre></td></tr><tr><td data-num="18"></td><td><pre>  System ID             </pre></td></tr><tr><td data-num="19"></td><td><pre>  Format                lvm2</pre></td></tr><tr><td data-num="20"></td><td><pre>  Metadata Areas        <span class="token number">2</span></pre></td></tr><tr><td data-num="21"></td><td><pre>  Metadata Sequence No  <span class="token number">1</span></pre></td></tr><tr><td data-num="22"></td><td><pre>  VG Access             read/write</pre></td></tr><tr><td data-num="23"></td><td><pre>  VG Status             resizable</pre></td></tr><tr><td data-num="24"></td><td><pre>  MAX LV                <span class="token number">0</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  Cur LV                <span class="token number">0</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  Open LV               <span class="token number">0</span></pre></td></tr><tr><td data-num="27"></td><td><pre>  Max PV                <span class="token number">0</span></pre></td></tr><tr><td data-num="28"></td><td><pre>  Cur PV                <span class="token number">2</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  Act PV                <span class="token number">2</span></pre></td></tr><tr><td data-num="30"></td><td><pre>  VG Size               <span class="token number">2.99</span> GiB</pre></td></tr><tr><td data-num="31"></td><td><pre>  PE Size               <span class="token number">4.00</span> MiB</pre></td></tr><tr><td data-num="32"></td><td><pre>  Total PE              <span class="token number">766</span></pre></td></tr><tr><td data-num="33"></td><td><pre>  Alloc PE / Size       <span class="token number">0</span> / <span class="token number">0</span>   </pre></td></tr><tr><td data-num="34"></td><td><pre>  Free  PE / Size       <span class="token number">766</span> / <span class="token number">2.99</span> GiB</pre></td></tr><tr><td data-num="35"></td><td><pre>  VG UUID               DmY2Nz-ietc-2Y8Y-7A1b-1cpT-qEeV-XrgURn</pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token punctuation">..</span>.  </pre></td></tr><tr><td data-num="37"></td><td><pre>   </pre></td></tr><tr><td data-num="38"></td><td><pre><span class="token comment"># 查看方法二：使用 vgscan 查看卷组信息</span></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># vgscan</span></pre></td></tr><tr><td data-num="40"></td><td><pre>  Reading volume <span class="token function">groups</span> from cache.</pre></td></tr><tr><td data-num="41"></td><td><pre>  Found volume group <span class="token string">"VG_TEST"</span> using metadata <span class="token builtin class-name">type</span> lvm2</pre></td></tr><tr><td data-num="42"></td><td><pre>  Found volume group <span class="token string">"centos"</span> using metadata <span class="token builtin class-name">type</span> lvm2</pre></td></tr><tr><td data-num="43"></td><td><pre><span class="token comment"># 查看方法三：使用 vgs 查看卷组信息</span></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># vgs </span></pre></td></tr><tr><td data-num="45"></td><td><pre>  VG      <span class="token comment">#PV #LV #SN Attr   VSize  VFree</span></pre></td></tr><tr><td data-num="46"></td><td><pre>  VG_TEST   <span class="token number">2</span>   <span class="token number">0</span>   <span class="token number">0</span> wz--n-  <span class="token number">2</span>.99g <span class="token number">2</span>.99g</pre></td></tr><tr><td data-num="47"></td><td><pre>  centos    <span class="token number">1</span>   <span class="token number">4</span>   <span class="token number">0</span> wz--n- <span class="token number">68</span>.72g    <span class="token number">0</span></pre></td></tr></table></figure><ol start="2"><li>扩展卷组</li></ol><p>如果在使用过程中，发现要使用的空间大于卷组的空间，可以对卷组进行扩容，把新的物理卷 (PV) 加入到卷组中，语法为</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>vgextend VG_NAME device1 <span class="token punctuation">..</span>. devicen</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">## 接下来演示将 sdc2 加入到卷组 VG_TEST 中。</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 使用 vgextend 扩容卷组 VG_TEST</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># vgextend VG_TEST /dev/sdc2  </span></pre></td></tr><tr><td data-num="7"></td><td><pre>  Volume group <span class="token string">"VG_TEST"</span> successfully extended</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#通过 vgdisplay 查看结果</span></pre></td></tr></table></figure><h3 id="创建-扩容逻辑卷"><a class="anchor" href="#创建-扩容逻辑卷">#</a> 创建、扩容逻辑卷</h3><ol><li>创建逻辑卷</li></ol><p>有了卷组，就可以创建逻辑卷 (LV) 了，创建逻辑卷相关命令有：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 使用 lvcreate 创建逻辑卷</span></pre></td></tr><tr><td data-num="2"></td><td><pre>lvcreate –L SIZE –n LV_NAME VG_NAME</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>使用lvdisplay、lvscan、lvs查看逻辑卷</pre></td></tr><tr><td data-num="5"></td><td><pre>lvdisplay</pre></td></tr><tr><td data-num="6"></td><td><pre>lvscan</pre></td></tr><tr><td data-num="7"></td><td><pre>lvs</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 接下来演示使用 VG_TEST 创建逻辑卷 lv_test</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment"># 使用 lvcreate 创建逻辑卷 lv_test</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># lvcreate -L 1g -n lv_test VG_TEST</span></pre></td></tr><tr><td data-num="12"></td><td><pre>  Logical volume <span class="token string">"lv_test"</span> created.</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token comment"># 查看方法一：使用 lvdisplay 查看逻辑卷 [root@masterdb ~]# lvdisplay </span></pre></td></tr><tr><td data-num="14"></td><td><pre>  --- Logical volume ---</pre></td></tr><tr><td data-num="15"></td><td><pre>  LV Path                /dev/VG_TEST/lv_test</pre></td></tr><tr><td data-num="16"></td><td><pre>  LV Name                lv_test</pre></td></tr><tr><td data-num="17"></td><td><pre>  VG Name                VG_TEST</pre></td></tr><tr><td data-num="18"></td><td><pre>  LV UUID                RqWMOG-wCJJ-deu4-dIgv-c5hI-Bsqa-FHgh4E</pre></td></tr><tr><td data-num="19"></td><td><pre>  LV Write Access        read/write</pre></td></tr><tr><td data-num="20"></td><td><pre>  LV Creation host, <span class="token function">time</span> masterdb, <span class="token number">2020</span>-05-13 <span class="token number">22</span>:42:45 +0800</pre></td></tr><tr><td data-num="21"></td><td><pre>  LV Status              available</pre></td></tr><tr><td data-num="22"></td><td><pre>  <span class="token comment"># open                 0</span></pre></td></tr><tr><td data-num="23"></td><td><pre>  LV Size                <span class="token number">1.00</span> GiB</pre></td></tr><tr><td data-num="24"></td><td><pre>  Current LE             <span class="token number">256</span></pre></td></tr><tr><td data-num="25"></td><td><pre>  Segments               <span class="token number">1</span></pre></td></tr><tr><td data-num="26"></td><td><pre>  Allocation             inherit</pre></td></tr><tr><td data-num="27"></td><td><pre>  Read ahead sectors     auto</pre></td></tr><tr><td data-num="28"></td><td><pre>  - currently <span class="token builtin class-name">set</span> to     <span class="token number">8192</span></pre></td></tr><tr><td data-num="29"></td><td><pre>  Block device           <span class="token number">253</span>:4</pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="31"></td><td><pre>   </pre></td></tr><tr><td data-num="32"></td><td><pre><span class="token comment"># 查看方法二：使用 lvscan 查看逻辑卷  </span></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># lvscan </span></pre></td></tr><tr><td data-num="34"></td><td><pre>  ACTIVE            <span class="token string">'/dev/VG_TEST/lv_test'</span> <span class="token punctuation">[</span><span class="token number">1.00</span> GiB<span class="token punctuation">]</span> inherit</pre></td></tr><tr><td data-num="35"></td><td><pre>  ACTIVE            <span class="token string">'/dev/centos/mysql'</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">45.00</span> GiB<span class="token punctuation">]</span> inherit</pre></td></tr><tr><td data-num="36"></td><td><pre>  ACTIVE            <span class="token string">'/dev/centos/swap'</span> <span class="token punctuation">[</span><span class="token operator">&lt;</span><span class="token number">3.73</span> GiB<span class="token punctuation">]</span> inherit</pre></td></tr><tr><td data-num="37"></td><td><pre>  ACTIVE            <span class="token string">'/dev/centos/home'</span> <span class="token punctuation">[</span><span class="token number">10.00</span> GiB<span class="token punctuation">]</span> inherit</pre></td></tr><tr><td data-num="38"></td><td><pre>  ACTIVE            <span class="token string">'/dev/centos/root'</span> <span class="token punctuation">[</span><span class="token number">10.00</span> GiB<span class="token punctuation">]</span> inherit</pre></td></tr><tr><td data-num="39"></td><td><pre>  </pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token comment"># 查看方法三：使用 lvs 查看逻辑卷  </span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># lvs </span></pre></td></tr><tr><td data-num="42"></td><td><pre>  LV      VG      Attr       LSize   Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</pre></td></tr><tr><td data-num="43"></td><td><pre>  lv_test VG_TEST -wi-a-----   <span class="token number">1</span>.00g                                                    </pre></td></tr><tr><td data-num="44"></td><td><pre>  home    centos  -wi-ao----  <span class="token number">10</span>.00g                                                    </pre></td></tr><tr><td data-num="45"></td><td><pre>  mysql   centos  -wi-ao---- <span class="token operator">&lt;</span><span class="token number">45</span>.00g                                                    </pre></td></tr><tr><td data-num="46"></td><td><pre>  root    centos  -wi-ao----  <span class="token number">10</span>.00g                                                    </pre></td></tr><tr><td data-num="47"></td><td><pre>  swap    centos  -wi-ao----  <span class="token operator">&lt;</span><span class="token number">3</span>.73g</pre></td></tr></table></figure><p>创建完 lv 之后，格式化挂载即可使用</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 创建文件系统</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># mkfs.ext4 /dev/VG_TEST/lv_test </span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">mke2fs</span> <span class="token number">1.42</span>.9 <span class="token punctuation">(</span><span class="token number">28</span>-Dec-2013<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>Filesystem <span class="token assign-left variable">label</span><span class="token operator">=</span></pre></td></tr><tr><td data-num="5"></td><td><pre> OS type: Linux</pre></td></tr><tr><td data-num="6"></td><td><pre>Block <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">4096</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre>Fragment <span class="token assign-left variable">size</span><span class="token operator">=</span><span class="token number">4096</span> <span class="token punctuation">(</span>log<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="8"></td><td><pre> <span class="token assign-left variable">Stride</span><span class="token operator">=</span><span class="token number">0</span> blocks, Stripe <span class="token assign-left variable">width</span><span class="token operator">=</span><span class="token number">0</span> blocks</pre></td></tr><tr><td data-num="9"></td><td><pre> <span class="token number">65536</span> inodes, <span class="token number">262144</span> blocks</pre></td></tr><tr><td data-num="10"></td><td><pre> <span class="token number">13107</span> blocks <span class="token punctuation">(</span><span class="token number">5.00</span>%<span class="token punctuation">)</span> reserved <span class="token keyword">for</span> the super user</pre></td></tr><tr><td data-num="11"></td><td><pre> First data <span class="token assign-left variable">block</span><span class="token operator">=</span><span class="token number">0</span></pre></td></tr><tr><td data-num="12"></td><td><pre> Maximum filesystem <span class="token assign-left variable">blocks</span><span class="token operator">=</span><span class="token number">268435456</span></pre></td></tr><tr><td data-num="13"></td><td><pre> <span class="token number">8</span> block <span class="token function">groups</span></pre></td></tr><tr><td data-num="14"></td><td><pre> <span class="token number">32768</span> blocks per group, <span class="token number">32768</span> fragments per group</pre></td></tr><tr><td data-num="15"></td><td><pre> <span class="token number">8192</span> inodes per group</pre></td></tr><tr><td data-num="16"></td><td><pre> Superblock backups stored on blocks: </pre></td></tr><tr><td data-num="17"></td><td><pre>     <span class="token number">32768</span>, <span class="token number">98304</span>, <span class="token number">163840</span>, <span class="token number">229376</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre>Allocating group tables: <span class="token keyword">done</span>                            </pre></td></tr><tr><td data-num="20"></td><td><pre> Writing inode tables: <span class="token keyword">done</span>                            </pre></td></tr><tr><td data-num="21"></td><td><pre> Creating journal <span class="token punctuation">(</span><span class="token number">8192</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span></pre></td></tr><tr><td data-num="22"></td><td><pre> Writing superblocks and filesystem accounting information: <span class="token keyword">done</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment"># 创建挂载点 [root@masterdb ~]# mkdir /test </span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token comment"># 挂载文件系统</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># mount /dev/VG_TEST/lv_test /test</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment"># 确认结果</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># df –h </span></pre></td></tr><tr><td data-num="29"></td><td><pre> Filesystem                   Size  Used Avail Use% Mounted on</pre></td></tr><tr><td data-num="30"></td><td><pre> /dev/mapper/centos-root       10G  <span class="token number">4</span>.1G  <span class="token number">5</span>.9G  <span class="token number">42</span>% /</pre></td></tr><tr><td data-num="31"></td><td><pre> <span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="32"></td><td><pre> /dev/mapper/VG_TEST-lv_test  976M  <span class="token number">1</span>.3M  924M   <span class="token number">1</span>% /test</pre></td></tr></table></figure><ol start="2"><li>扩容逻辑卷</li></ol><p>使用如下命令进行扩容</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 使用 lvextend 扩容 lv，+SIZE 代表增加的空间</span></pre></td></tr><tr><td data-num="2"></td><td><pre>lvextend <span class="token parameter variable">-L</span> +SIZE lv_device</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 调整文件系统的大小</span></pre></td></tr><tr><td data-num="6"></td><td><pre>resize2fs device lv_device</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#接下来演示使用对逻辑卷 lv_test 扩容 500M。</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">#进行扩容操作：</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token comment"># 对 lv 进行扩容，增加 500M 空间</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># lvextend -L +500M /dev/VG_TEST/lv_test </span></pre></td></tr><tr><td data-num="14"></td><td><pre>  Size of logical volume VG_TEST/lv_test changed from <span class="token number">1.00</span> GiB <span class="token punctuation">(</span><span class="token number">256</span> extents<span class="token punctuation">)</span> to <span class="token operator">&lt;</span><span class="token number">1.49</span> GiB <span class="token punctuation">(</span><span class="token number">381</span> extents<span class="token punctuation">)</span>.</pre></td></tr><tr><td data-num="15"></td><td><pre>  Logical volume VG_TEST/lv_test successfully resized.</pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">#之后查看大小，实际是未发生改变</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">#需要调整文件系统的大小</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment"># 使用 resize2fs 调整文件系统的大小</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token punctuation">[</span>root@masterdb ~<span class="token punctuation">]</span><span class="token comment"># resize2fs /dev/VG_TEST/lv_test </span></pre></td></tr><tr><td data-num="22"></td><td><pre>resize2fs <span class="token number">1.42</span>.9 <span class="token punctuation">(</span><span class="token number">28</span>-Dec-2013<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>Filesystem at /dev/VG_TEST/lv_test is mounted on /test<span class="token punctuation">;</span> on-line resizing required</pre></td></tr><tr><td data-num="24"></td><td><pre>old_desc_blocks <span class="token operator">=</span> <span class="token number">1</span>, new_desc_blocks <span class="token operator">=</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="25"></td><td><pre>The filesystem on /dev/VG_TEST/lv_test is now <span class="token number">390144</span> blocks long.</pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token comment">#确认是否发生变法</span></pre></td></tr></table></figure><p>&lt;span style=&quot;color: red;&quot;&gt; 注意：&lt;/span &gt; 如果遇到大磁盘的情况（超过 2T）需要换一种分区方式</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#查看磁盘</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">df</span> <span class="token parameter variable">-h</span></pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#查看磁盘分区挂载情况</span></pre></td></tr><tr><td data-num="5"></td><td><pre>lsblk</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#fdisk 和 parted 都是磁盘分区工具 大于 2t 的只能用 parted，我这里用 parted</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#进入 parted 命令交互后，将 /dev/sdb 进行分区</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token function">parted</span> /dev/vdb</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#新建磁盘标签类型为 GPT</span></pre></td></tr><tr><td data-num="12"></td><td><pre>mklabel gpt</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">#命令格式</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token comment">#mkpart PART-TYPE [FS-TYPE] START END</span></pre></td></tr><tr><td data-num="16"></td><td><pre>mkpart vdb1 ext4 <span class="token number">0</span>% <span class="token number">50</span>%  </pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>mkpart vdb2 ext4 <span class="token number">50</span>% <span class="token number">100</span>% </pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">#打印</span></pre></td></tr><tr><td data-num="21"></td><td><pre>print</pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">#使用 toggle 更改硬盘类型</span></pre></td></tr><tr><td data-num="24"></td><td><pre>toggle <span class="token number">1</span> lvm</pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">#退出</span></pre></td></tr><tr><td data-num="27"></td><td><pre>quit</pre></td></tr></table></figure><h2 id="四-虚拟内存设置"><a class="anchor" href="#四-虚拟内存设置">#</a> 四、虚拟内存设置</h2><p><span class="exturl" data-url="aHR0cHM6Ly93d3cuY25ibG9ncy5jb20veXVhbnlvbmdxaWFuZy9wLzE1NjUwMTc2Lmh0bWw=">https://www.cnblogs.com/yuanyongqiang/p/15650176.html</span></p><h3 id="1-增加"><a class="anchor" href="#1-增加">#</a> 1、增加</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 查看当前虚拟内存的状态</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ <span class="token function">swapon</span> <span class="token parameter variable">-s</span>		</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 创建一个用于存放虚拟内存文件的目录，可以是其它文件名，已存在则不需要创建</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ <span class="token function">mkdir</span> /swap	</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 创建一个占用空间大小为 64GB 的文件</span></pre></td></tr><tr><td data-num="6"></td><td><pre>$ fallocate <span class="token parameter variable">-l</span> 64G /swap/swapfile	</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 将创建的文件制作成虚拟内存文件</span></pre></td></tr><tr><td data-num="8"></td><td><pre>$ <span class="token function">mkswap</span> /swap/swapfile	</pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment"># 激活虚拟内存</span></pre></td></tr><tr><td data-num="10"></td><td><pre>$ <span class="token function">swapon</span> /swap/swapfile</pre></td></tr></table></figure><h3 id="2-删除"><a class="anchor" href="#2-删除">#</a> 2、删除</h3><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 关闭所有虚拟内存</span></pre></td></tr><tr><td data-num="2"></td><td><pre>$ swapoff <span class="token parameter variable">-a</span> 	</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 关闭指定虚拟内存</span></pre></td></tr><tr><td data-num="4"></td><td><pre>$ swapoff /swap/swapfile</pre></td></tr></table></figure><h3 id="3-设置开机自动启动虚拟内存"><a class="anchor" href="#3-设置开机自动启动虚拟内存">#</a> 3、设置开机自动启动虚拟内存</h3><p>编辑 /etc/fstab 文件，在尾部添加以下内容：</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>/swap/swapfile   swap  swap  defaults  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr></table></figure><h2 id="五-ssh-scp"><a class="anchor" href="#五-ssh-scp">#</a> 五、ssh /scp</h2><h3 id="ssh-root192168016"><a class="anchor" href="#ssh-root192168016">#</a> ssh <span class="exturl" data-url="bWFpbHRvOnJvb3RAMTkyLjE2OC4wLjE2">root@192.168.0.16</span></h3><h2 id="六-内存使用情况性能"><a class="anchor" href="#六-内存使用情况性能">#</a> 六、内存使用情况 / 性能</h2><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">free</span> <span class="token parameter variable">-h</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">top</span></pre></td></tr><tr><td data-num="4"></td><td><pre></pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>vmstats</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>sar <span class="token parameter variable">-r</span> <span class="token number">1</span></pre></td></tr><tr><td data-num="12"></td><td><pre>iostat <span class="token parameter variable">-x</span> <span class="token number">1</span></pre></td></tr></table></figure><h2 id="七-cpu使用情况性能"><a class="anchor" href="#七-cpu使用情况性能">#</a> 七、CPU 使用情况 / 性能</h2><pre><code>
</code></pre><h2 id="九-硬盘使用情况"><a class="anchor" href="#九-硬盘使用情况">#</a> 九、硬盘使用情况</h2><h3 id="语法"><a class="anchor" href="#语法">#</a> 语法</h3><p>Usage: iostat [ options ] [ [ ] ]<br>Options are:<br>[ -c ] [ -d ] [ -h ] [ -k | -m ] [ -N ] [ -t ] [ -V ] [ -x ] [ -y ] [ -z ]<br>[ -j { ID | LABEL | PATH | UUID | … } ]<br>[ [ -T ] -g &lt;group_name&gt; ] [ -p [ [,…] | ALL ] ]<br>[ […] | ALL ]</p><p>主要分为 4 个部分：iostat [选项] [&lt; 时间间隔 &gt; &lt; 次数 &gt; ]</p><h3 id="参数详解"><a class="anchor" href="#参数详解">#</a> 参数详解</h3><pre><code>-c： 仅显示CPU统计信息，与-d选项互斥
-d：仅显示磁盘统计信息，与-c选项互斥
-h：使用NFS（Network File System网络文件系统）的输出报告，更加友好可读。需要使用-n参数开启NFS。
-k：以 kb 为单位显示，默认情况下，iostat的输出是以block作为计量单位，加上这个参数可以以kb作为计量单位显示。（该参数仅在linux内核版本2.4以后数据才是准确的）
-m：以 mb 为单位显示（该参数仅在linux内核版本2.4以后数据才是准确的）
-N：显示磁盘阵列(LVM) 信息。
-V：显示版本信息
-x：显示更详细的磁盘报告信息，默认只显示六列，加上该参数后会显示更详细的信息（该参数仅在linux内核版本2.4以后数据才是准确的）
-n：显示NFS（Network File System网络文件系统） 使用情况（该参数仅在linux内核版本2.6.17以后有效）
-t：输出报告时显示系统时间
-p：[ &#123; device [,…] | ALL &#125; ] 显示磁盘分区的相关统计信息（默认粒度只到磁盘，没有显示具体的逻辑分区）
-y：跳过不显示第一次报告的数据，因为iostat使用的是采样统计，所以iostat的第一次输出的数据是自系统启动以来的累计的数据
</code></pre><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>iostat <span class="token parameter variable">-d</span> <span class="token parameter variable">-k</span> <span class="token parameter variable">-x</span> <span class="token number">1</span> <span class="token number">10</span> 命令查询<span class="token punctuation">(</span>查询磁盘使用情况的详细信息,以KB为单位,每秒刷新一次,共刷新10次<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre>Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</pre></td></tr><tr><td data-num="4"></td><td><pre>sda               <span class="token number">0.01</span>     <span class="token number">0.01</span>    <span class="token number">0.67</span>    <span class="token number">0.29</span>    <span class="token number">76.85</span>     <span class="token number">1.99</span>   <span class="token number">165.34</span>     <span class="token number">0.02</span>   <span class="token number">16.12</span>   <span class="token number">15.23</span>   <span class="token number">18.20</span>   <span class="token number">3.02</span>   <span class="token number">0.29</span></pre></td></tr><tr><td data-num="5"></td><td><pre>sdb               <span class="token number">0.11</span>    <span class="token number">19.75</span>    <span class="token number">4.38</span>   <span class="token number">17.47</span>   <span class="token number">327.72</span>   <span class="token number">370.36</span>    <span class="token number">63.91</span>     <span class="token number">0.32</span>   <span class="token number">14.41</span>   <span class="token number">29.11</span>   <span class="token number">10.73</span>   <span class="token number">6.45</span>  <span class="token number">14.10</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>Device:         rrqm/s   wrqm/s     r/s     w/s    rkB/s    wkB/s avgrq-sz avgqu-sz   await r_await w_await  svctm  %util</pre></td></tr><tr><td data-num="8"></td><td><pre>sda               <span class="token number">0.00</span>     <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>   <span class="token number">0.00</span>   <span class="token number">0.00</span></pre></td></tr><tr><td data-num="9"></td><td><pre>sdb               <span class="token number">0.00</span>     <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">0.00</span>     <span class="token number">1.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>    <span class="token number">0.00</span>   <span class="token number">0.00</span> <span class="token number">100.00</span></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>  iostat输 出项目说明</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>              rrqm/s</pre></td></tr><tr><td data-num="15"></td><td><pre>  将读入请求合并后,每秒发送到设备的读入请求数.</pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>              wrqm/s</pre></td></tr><tr><td data-num="18"></td><td><pre>  将写入请求合并后,每秒发送到设备的写入请求数.</pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>              r/s</pre></td></tr><tr><td data-num="21"></td><td><pre>  每秒发送到设备的读入请求数.</pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre>              w/s</pre></td></tr><tr><td data-num="24"></td><td><pre>  每秒发送到设备的写入请求数.</pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre>              rsec/s</pre></td></tr><tr><td data-num="27"></td><td><pre>  每秒从设备读入的扇区数.</pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>              wsec/s</pre></td></tr><tr><td data-num="30"></td><td><pre>  每秒向设备写入的扇区数.</pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>              rkB/s</pre></td></tr><tr><td data-num="33"></td><td><pre>  每秒从设备读入的数据量,单位为K.</pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>              wkB/s</pre></td></tr><tr><td data-num="36"></td><td><pre>  每秒向设备写入的数据量,单位为K.</pre></td></tr><tr><td data-num="37"></td><td><pre></pre></td></tr><tr><td data-num="38"></td><td><pre>              avgrq-sz</pre></td></tr><tr><td data-num="39"></td><td><pre>  发送到设备的请求的平均大小,单位是扇区.</pre></td></tr><tr><td data-num="40"></td><td><pre></pre></td></tr><tr><td data-num="41"></td><td><pre>              avgqu-sz</pre></td></tr><tr><td data-num="42"></td><td><pre>  发送到设备的请求的平均队列长度.</pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>              await</pre></td></tr><tr><td data-num="45"></td><td><pre>  I/O请求平均执行时间.包括发送请求和执行的时间.单位是毫秒.</pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre>              svctm</pre></td></tr><tr><td data-num="48"></td><td><pre>  发送到设备的I/O请求的平均执行时间.单位是毫秒.</pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>              %util</pre></td></tr><tr><td data-num="51"></td><td><pre>  在I/O请求发送到设备期间,占用CPU时间的百分比.用于显示设备的带宽利用率.</pre></td></tr><tr><td data-num="52"></td><td><pre>  当这个值接近100%时,表示设备带宽已经占满.</pre></td></tr></table></figure><h3 id="性能分析"><a class="anchor" href="#性能分析">#</a> 性能分析</h3><ol><li><p><strong>I/O 瓶颈</strong></p><p>如果 % iowait 的值过高，表示硬盘存在 I/O 瓶颈</p></li><li><p><strong>内存不足</strong></p><p>% idle 值高，表示 CPU 较空闲，如果 % idle 值高但系统响应慢时，有可能是 CPU 在等待分配内存，此时应加大内存容量</p></li><li><p><strong>CPU 资源不足</strong></p><p>如果 % idle 值持续低于 10，那么系统的 CPU 处理能力相对较低，表明系统中最需要解决的资源是 CPU</p></li><li><p><strong>IOPS 计算</strong></p><p>计算方式： r/s+w/s<br>I/O per second，即每秒钟可以处理的 I/O 个数。<br>随机读写频繁的应用（一般指 I/O 小于 64KB 的应用场景），如小文件存储 (图片)、OLTP 数据库、邮件服务器，关注随机读写性能，IOPS 是关键衡量指标。</p></li><li><p><strong>吞吐量 计算</strong></p><p>计算方式： rkB/s+wkB/s<br>顺序读写频繁的应用，传输大量连续数据，如电视台的视频编辑，视频点播 VOD (Video On Demand)，关注连续读写性能。数据吞吐量是关键衡量指标。</p></li></ol><h2 id="十-dmesg命令"><a class="anchor" href="#十-dmesg命令">#</a> 十、dmesg 命令</h2><h3 id="命令语法"><a class="anchor" href="#命令语法">#</a> 命令语法</h3><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>dmesg [options]</pre></td></tr></table></figure><h3 id="选项说明"><a class="anchor" href="#选项说明">#</a> 选项说明</h3><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>-c  #显示信息后，清除ring buffer中的内容</pre></td></tr><tr><td data-num="2"></td><td><pre>-s&lt;缓冲区大小>  #默认值为8196，刚好等于ring buffer的大小</pre></td></tr><tr><td data-num="3"></td><td><pre>-n  #设置记录信息的层级</pre></td></tr><tr><td data-num="4"></td><td><pre>-D  #禁用打印消息到控制台</pre></td></tr><tr><td data-num="5"></td><td><pre>-E  #启用打印消息到控制台</pre></td></tr><tr><td data-num="6"></td><td><pre>-h  #打印帮助文本并退出</pre></td></tr><tr><td data-num="7"></td><td><pre>-k  #打印内核消息</pre></td></tr><tr><td data-num="8"></td><td><pre>-n  #设置将消息记录到控制台的级别</pre></td></tr><tr><td data-num="9"></td><td><pre>-r  #打印原始消息缓冲区</pre></td></tr><tr><td data-num="10"></td><td><pre>-s  #使用多少大小的缓冲区来查询内核环缓冲区。 默认情况下为16392</pre></td></tr><tr><td data-num="11"></td><td><pre>-T  #打印人类可读时间戳</pre></td></tr><tr><td data-num="12"></td><td><pre>-t  #不打印内核的时间戳</pre></td></tr><tr><td data-num="13"></td><td><pre>-u  #打印用户空间消息</pre></td></tr><tr><td data-num="14"></td><td><pre>-V  #输出版本信息并退出</pre></td></tr><tr><td data-num="15"></td><td><pre>-x  #将设施和级别（优先级）编号解码为可读的前缀</pre></td></tr></table></figure><h3 id="应用举例"><a class="anchor" href="#应用举例">#</a> 应用举例</h3><ol><li>查看前 20 行开机信息</li></ol><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>[root@centos7 ~]# dmesg | head -n 20</pre></td></tr><tr><td data-num="2"></td><td><pre>[    0.000000] Initializing cgroup subsys cpuset</pre></td></tr><tr><td data-num="3"></td><td><pre>[    0.000000] Initializing cgroup subsys cpu</pre></td></tr><tr><td data-num="4"></td><td><pre>[    0.000000] Initializing cgroup subsys cpuacct</pre></td></tr><tr><td data-num="5"></td><td><pre>[    0.000000] Linux version 3.10.0-1127.18.2.el7.x86_64 (mockbuild@kbuilder.bsys.centos.org) (gcc version 4.8.5 20150623 (Red Hat 4.8.5-39) (GCC) ) #1 SMP Sun Jul 26 15:27:06 UTC 2020</pre></td></tr><tr><td data-num="6"></td><td><pre>[    0.000000] Command line: BOOT_IMAGE=/vmlinuz-3.10.0-1127.18.2.el7.x86_64 root=/dev/mapper/centos-root ro crashkernel=auto spectre_v2=retpoline rd.lvm.lv=centos/root rd.lvm.lv=centos/swap rhgb quiet LANG=en_US.UTF-8</pre></td></tr><tr><td data-num="7"></td><td><pre>[    0.000000] Disabled fast string operations</pre></td></tr><tr><td data-num="8"></td><td><pre>[    0.000000] e820: BIOS-provided physical RAM map:</pre></td></tr><tr><td data-num="9"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x0000000000000000-0x000000000009ebff] usable</pre></td></tr><tr><td data-num="10"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x000000000009ec00-0x000000000009ffff] reserved</pre></td></tr><tr><td data-num="11"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x00000000000dc000-0x00000000000fffff] reserved</pre></td></tr><tr><td data-num="12"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x0000000000100000-0x000000003fedffff] usable</pre></td></tr><tr><td data-num="13"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x000000003fee0000-0x000000003fefefff] ACPI data</pre></td></tr><tr><td data-num="14"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x000000003feff000-0x000000003fefffff] ACPI NVS</pre></td></tr><tr><td data-num="15"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x000000003ff00000-0x000000003fffffff] usable</pre></td></tr><tr><td data-num="16"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x00000000f0000000-0x00000000f7ffffff] reserved</pre></td></tr><tr><td data-num="17"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x00000000fec00000-0x00000000fec0ffff] reserved</pre></td></tr><tr><td data-num="18"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x00000000fee00000-0x00000000fee00fff] reserved</pre></td></tr><tr><td data-num="19"></td><td><pre>[    0.000000] BIOS-e820: [mem 0x00000000fffe0000-0x00000000ffffffff] reserved</pre></td></tr><tr><td data-num="20"></td><td><pre>[    0.000000] NX (Execute Disable) protection: active</pre></td></tr><tr><td data-num="21"></td><td><pre>[    0.000000] SMBIOS 2.4 present.</pre></td></tr></table></figure><ol start="2"><li>查看与内存相关的开机信息</li></ol><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>[root@centos7 ~]# dmesg | grep -i memory</pre></td></tr><tr><td data-num="2"></td><td><pre>[    0.000000] Base memory trampoline at [ffff9102c0098000] 98000 size 24576</pre></td></tr><tr><td data-num="3"></td><td><pre>[    0.000000] crashkernel=auto resulted in zero bytes of reserved memory.</pre></td></tr><tr><td data-num="4"></td><td><pre>[    0.000000] Early memory node ranges</pre></td></tr><tr><td data-num="5"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x0009e000-0x0009efff]</pre></td></tr><tr><td data-num="6"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x0009f000-0x0009ffff]</pre></td></tr><tr><td data-num="7"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x000a0000-0x000dbfff]</pre></td></tr><tr><td data-num="8"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x000dc000-0x000fffff]</pre></td></tr><tr><td data-num="9"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x3fee0000-0x3fefefff]</pre></td></tr><tr><td data-num="10"></td><td><pre>[    0.000000] PM: Registered nosave memory: [mem 0x3feff000-0x3fefffff]</pre></td></tr><tr><td data-num="11"></td><td><pre>[    0.000000] Memory: 972140k/1048576k available (7784k kernel code, 524k absent, 75912k reserved, 5958k data, 1980k init)</pre></td></tr><tr><td data-num="12"></td><td><pre>[    0.000000] please try 'cgroup_disable=memory' option if you don't want memory cgroups</pre></td></tr><tr><td data-num="13"></td><td><pre>[    0.755288] Initializing cgroup subsys memory</pre></td></tr><tr><td data-num="14"></td><td><pre>[    1.619645] x86/mm: Memory block size: 128MB</pre></td></tr><tr><td data-num="15"></td><td><pre>[    3.669071] Freeing initrd memory: 20628k freed</pre></td></tr><tr><td data-num="16"></td><td><pre>[    3.933907] Non-volatile memory driver v1.3</pre></td></tr><tr><td data-num="17"></td><td><pre>[    3.935079] crash memory driver: version 1.1</pre></td></tr><tr><td data-num="18"></td><td><pre>[    4.000261] Freeing unused kernel memory: 1980k freed</pre></td></tr><tr><td data-num="19"></td><td><pre>[    4.001692] Freeing unused kernel memory: 396k freed</pre></td></tr><tr><td data-num="20"></td><td><pre>[    4.003171] Freeing unused kernel memory: 540k freed</pre></td></tr><tr><td data-num="21"></td><td><pre>[    5.956205] [drm] Max dedicated hypervisor surface memory is 0 kiB</pre></td></tr><tr><td data-num="22"></td><td><pre>[    5.956206] [drm] Maximum display memory size is 32768 kiB</pre></td></tr><tr><td data-num="23"></td><td><pre>[    5.968934] [TTM] Zone  kernel: Available graphics memory: 497842 kiB</pre></td></tr></table></figure><ol start="3"><li>查看与磁盘相关的开机信息</li></ol><figure class="highlight text"><figcaption data-lang="text"></figcaption><table><tr><td data-num="1"></td><td><pre>[root@centos7 ~]# dmesg | grep -i disk</pre></td></tr><tr><td data-num="2"></td><td><pre>[    0.000000] RAMDISK: [mem 0x357a7000-0x36bcbfff]</pre></td></tr><tr><td data-num="3"></td><td><pre>[    3.738914] VFS: Disk quotas dquot_6.5.2</pre></td></tr><tr><td data-num="4"></td><td><pre>[    4.013333] systemd[1]: Running in initial RAM disk.</pre></td></tr><tr><td data-num="5"></td><td><pre>[    6.295432] sd 0:0:0:0: [sda] Attached SCSI disk</pre></td></tr><tr><td data-num="6"></td><td><pre>[root@centos7 ~]# dmesg | grep -i sda</pre></td></tr><tr><td data-num="7"></td><td><pre>[    6.291698] sd 0:0:0:0: [sda] 41943040 512-byte logical blocks: (21.4 GB/20.0 GiB)</pre></td></tr><tr><td data-num="8"></td><td><pre>[    6.291830] sd 0:0:0:0: [sda] Write Protect is off</pre></td></tr><tr><td data-num="9"></td><td><pre>[    6.291831] sd 0:0:0:0: [sda] Mode Sense: 61 00 00 00</pre></td></tr><tr><td data-num="10"></td><td><pre>[    6.292032] sd 0:0:0:0: [sda] Cache data unavailable</pre></td></tr><tr><td data-num="11"></td><td><pre>[    6.292033] sd 0:0:0:0: [sda] Assuming drive cache: write through</pre></td></tr><tr><td data-num="12"></td><td><pre>[    6.294046]  sda: sda1 sda2</pre></td></tr><tr><td data-num="13"></td><td><pre>[    6.295432] sd 0:0:0:0: [sda] Attached SCSI disk</pre></td></tr><tr><td data-num="14"></td><td><pre>[   15.843965] XFS (sda1): Mounting V5 Filesystem</pre></td></tr><tr><td data-num="15"></td><td><pre>[   16.778908] XFS (sda1): Starting recovery (logdev: internal)</pre></td></tr><tr><td data-num="16"></td><td><pre>[   16.801659] XFS (sda1): Ending recovery (logdev: internal)</pre></td></tr></table></figure><p>dmesg | egrep -i -B100 'killed process'</p><h2 id="十一-source"><a class="anchor" href="#十一-source">#</a> 十一、source</h2><p><em>source</em> 命令通常用于重新执行刚修改的初始化文件，使之立即生效，而不必注销并重新登录</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">vi</span> /etc/profile</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#通常用于改了环境变量配置文件后时期立即生效</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token builtin class-name">source</span> /etc/profile</pre></td></tr></table></figure><h2 id="十二-文件文件夹相关"><a class="anchor" href="#十二-文件文件夹相关">#</a> 十二、文件 / 文件夹相关</h2><ol><li>cd</li></ol><pre><code>
</code></pre><ol start="2"><li>mkdir</li></ol><pre><code>
</code></pre><ol start="3"><li>ls</li></ol><pre><code>
</code></pre><ol start="4"><li>pwd</li></ol><pre><code>
</code></pre><ol start="5"><li><p>rmdir</p></li><li><p>rm</p></li><li><p>cp</p></li></ol><pre><code>#注意：要-r表示递归，如果没有则只能传递文件，不能传递文件夹
nohup cp -r a b &amp;

#排除指定文件
nohup cp !(file1|file2) -r /source /sink &amp;
</code></pre><ol start="8"><li>mv</li></ol><pre><code>mv [选项] 源文件夹 目标文件夹
</code></pre><ol start="9"><li><p>chmod</p></li><li><p>touch</p></li><li><p>cat</p></li><li><p>less</p></li><li><p>tail</p></li><li><p>grep</p></li><li><p>echo</p></li><li><p>du</p></li></ol><pre><code>#du 命令是查看文件大小的命令

#列出当前目录下所有文件大小
du -ls
</code></pre><p>​</p><ol start="17"><li></li></ol><h2 id="十三-防火墙"><a class="anchor" href="#十三-防火墙">#</a> 十三、防火墙</h2><ol><li>查看防火墙状态</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>systemctl status firewalld</pre></td></tr><tr><td data-num="2"></td><td><pre>systemctl stop firewalld</pre></td></tr><tr><td data-num="3"></td><td><pre>systemctl <span class="token builtin class-name">enable</span> firewalld</pre></td></tr></table></figure><ol start="2"><li>检查端口，关闭端口访问</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 查询打开的端口</span></pre></td></tr><tr><td data-num="2"></td><td><pre>firewall-cmd  <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 关闭端口</span></pre></td></tr><tr><td data-num="4"></td><td><pre>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --remove-port<span class="token operator">=</span><span class="token number">8080</span>/tcp <span class="token parameter variable">--permanent</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 重新载入防火墙设置，使设置生效</span></pre></td></tr><tr><td data-num="6"></td><td><pre>firewall-cmd <span class="token parameter variable">--reload</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment"># 查询查询打开的端口</span></pre></td></tr><tr><td data-num="8"></td><td><pre>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-ports</pre></td></tr></table></figure><ol start="3"><li>开放 IP 地址和端口</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment"># 允许 ip 192.168.1.1 访问 1521 端口</span></pre></td></tr><tr><td data-num="2"></td><td><pre>firewall-cmd <span class="token parameter variable">--permanent</span> --add-rich-rule<span class="token operator">=</span><span class="token string">"rule family="</span>ipv4<span class="token string">" source address="</span><span class="token number">192.168</span>.1.1<span class="token string">" port protocol="</span>tcp<span class="token string">" port="</span><span class="token number">1521</span><span class="token string">" accept"</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment"># 重新载入防火墙</span></pre></td></tr><tr><td data-num="4"></td><td><pre>firewall-cmd <span class="token parameter variable">--reload</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token comment"># 查看已经设置的规则</span></pre></td></tr><tr><td data-num="6"></td><td><pre>firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --list-rich-rules</pre></td></tr></table></figure><h2 id="十四-用户用户组相关"><a class="anchor" href="#十四-用户用户组相关">#</a> 十四、用户 / 用户组相关</h2><ol><li>创建用户</li><li></li></ol><h2 id="十五-系统管理相关"><a class="anchor" href="#十五-系统管理相关">#</a> 十五、系统管理相关</h2><ol><li>日期管理</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">date</span> <span class="token punctuation">[</span>参数选项<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#参数选项：</span></pre></td></tr><tr><td data-num="4"></td><td><pre>-d<span class="token operator">&lt;</span>字符串<span class="token operator">></span>  :显示字符串所指的日期与时间,字符串前后必须加上双引号</pre></td></tr><tr><td data-num="5"></td><td><pre>-s<span class="token operator">&lt;</span>字符串<span class="token operator">></span> :根据字符串来设置日期与时间,字符串前后必须加上双引号,备注:注意权限的问题</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token parameter variable">-u</span>        <span class="token punctuation">;</span>显示GMT</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token parameter variable">--help</span>    <span class="token punctuation">;</span>在线帮助</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token parameter variable">--version</span> :显示版本信息</pre></td></tr></table></figure><ol start="2"><li>显示用户</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">logname</span> <span class="token punctuation">[</span>--help<span class="token punctuation">]</span> <span class="token punctuation">[</span>--version<span class="token punctuation">]</span> 显示登录账号的信息</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#参数选项：</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token parameter variable">--help</span>    <span class="token punctuation">;</span> 在线帮助</pre></td></tr><tr><td data-num="5"></td><td><pre>---version <span class="token builtin class-name">:</span> 显示版本信息</pre></td></tr></table></figure><ol start="3"><li>切换用户</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">su</span> <span class="token punctuation">[</span>-fmp<span class="token punctuation">]</span> <span class="token punctuation">[</span>-c command<span class="token punctuation">]</span> <span class="token punctuation">[</span>-s shell<span class="token punctuation">]</span> <span class="token punctuation">[</span>--help<span class="token punctuation">]</span><span class="token punctuation">[</span>--version<span class="token punctuation">]</span><span class="token punctuation">[</span>-<span class="token punctuation">]</span> <span class="token punctuation">[</span>uesr<span class="token punctuation">]</span><span class="token punctuation">[</span>apg<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#实例：</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">su</span> <span class="token parameter variable">-c</span> <span class="token function">ls</span> root 切换到root当中之后,执行ls命令,然后再切换回来</pre></td></tr></table></figure><ol start="4"><li>top 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">##top 命令经常用来监控 Linux 系统 CPU、内存的使用情况</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">top</span>           实时显示所有的进程信息</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">top</span>  <span class="token parameter variable">-c</span>       实现显示所有的进程信息<span class="token punctuation">(</span>显示完整命令<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">top</span>  <span class="token parameter variable">-p</span>   pid 实时显示指定进程的信息</pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token function">top</span> <span class="token parameter variable">-H</span>        实时显示</pre></td></tr><tr><td data-num="7"></td><td><pre>结束监控的快捷键:  q</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">#常用：</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">top</span> <span class="token parameter variable">-c</span> <span class="token parameter variable">-H</span></pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">top</span> <span class="token parameter variable">-H</span> <span class="token parameter variable">-p</span> <span class="token number">20589</span> （监控指定pid的内存使用情况等）</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre>asks: <span class="token number">426</span> total,   <span class="token number">1</span> running, <span class="token number">417</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">8</span> zombie</pre></td></tr><tr><td data-num="16"></td><td><pre>%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">0.3</span> us,  <span class="token number">0.3</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">99.3</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st</pre></td></tr><tr><td data-num="17"></td><td><pre>MiB Mem <span class="token builtin class-name">:</span>  <span class="token number">64098.3</span> total,  <span class="token number">55477.2</span> free,   <span class="token number">4243.6</span> used,   <span class="token number">4377.4</span> buff/cache</pre></td></tr><tr><td data-num="18"></td><td><pre>MiB Swap:   <span class="token number">4131.9</span> total,   <span class="token number">4131.9</span> free,      <span class="token number">0.0</span> used.  <span class="token number">59217.4</span> avail Mem </pre></td></tr><tr><td data-num="19"></td><td><pre></pre></td></tr><tr><td data-num="20"></td><td><pre>    PID <span class="token environment constant">USER</span>      PR  NI    VIRT    RES    SHR S  %CPU  %MEM     TIME+ COMMAND                                            </pre></td></tr><tr><td data-num="21"></td><td><pre>      <span class="token number">1</span> root      <span class="token number">20</span>   <span class="token number">0</span>  <span class="token number">176320</span>  <span class="token number">20096</span>   <span class="token number">9728</span> S   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:04.01 systemd                                            </pre></td></tr><tr><td data-num="22"></td><td><pre>      <span class="token number">2</span> root      <span class="token number">20</span>   <span class="token number">0</span>       <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> S   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:00.10 kthreadd </pre></td></tr><tr><td data-num="23"></td><td><pre>第2行显示 CPU 相关信息，当前用户空间占用 CPU 百分比为 <span class="token number">0.0</span>%；内核空间占用 CPU 百分比为 <span class="token number">0.0</span>%，用户进程空间内改变过优先级的进程占用 CPU 百分比为 <span class="token number">0.0</span>%，空闲 CPU 百分比为 <span class="token number">100.0</span>%，等待输入输出的 CPU 时间百分比为 <span class="token number">0.0</span>%，CPU 服务于硬件中断所耗费的时间总额为 <span class="token number">0.0</span>%，CPU 服务软中断所耗费的时间总额为 <span class="token number">0.0</span>%，虚拟机被 hypervisor 偷去的 CPU 时间为 <span class="token number">0.0</span>。</pre></td></tr></table></figure><ol start="5"><li>ps 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ps</span>              显示当前正在运行的进程信息</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">ps</span>    <span class="token parameter variable">-A</span>        显示系统当中所有的进程信息</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">ps</span>   <span class="token parameter variable">-ef</span>        显示系统当中所有的进程信息<span class="token punctuation">(</span>完整信息<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">ps</span>   <span class="token parameter variable">-u</span>  用户名  显示指定用户的进程信息</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token comment">#常用结合 grep 命令</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token operator">|</span> <span class="token function">grep</span> tomcat</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ps -ef | grep java</span></pre></td></tr><tr><td data-num="10"></td><td><pre>root      <span class="token number">11188</span>  <span class="token number">11061</span>  <span class="token number">0</span> <span class="token number">3</span>月06 ?       00:00:03 ./xjar <span class="token function">java</span> <span class="token parameter variable">-Xms512m</span> <span class="token parameter variable">-Xmx512m</span> <span class="token parameter variable">-Djava.security.egd</span><span class="token operator">=</span>file:/dev/./urandom <span class="token parameter variable">-jar</span> martin-extension-ncnb.xjar</pre></td></tr></table></figure><ol start="6"><li>kill 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">kill</span>  进程PID      杀死指定进程</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">kill</span>  <span class="token parameter variable">-9</span>   进程PID  彻底杀死指定进程 </pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">kill</span>  <span class="token parameter variable">-9</span>  <span class="token variable"><span class="token variable">$(</span><span class="token function">ps</span>    -ef<span class="token operator">|</span><span class="token function">grep</span> 用户名<span class="token variable">)</span></span>    杀死指定用户的所有进程</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">kill</span>  <span class="token parameter variable">-u</span>   用户名     杀死指定用户所有进程</pre></td></tr></table></figure><ol start="7"><li>关机命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">shutdown</span>                    不同的版本有所差异</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">shutdown</span>  - h now           立马关机</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">shutdown</span>   +1 <span class="token string">"警告信息"</span>      等待一分钟,之后关机,并且出现警告信息</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">shutdown</span>  <span class="token parameter variable">-r</span>  +1 <span class="token string">"警告信息"</span>   等待一分钟,之后重启,并且出现警告信息</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">shutdown</span>  <span class="token parameter variable">-c</span>                 取消当前的关机操作</pre></td></tr></table></figure><ol start="8"><li>重启命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">reboot</span>                   立马重启</pre></td></tr></table></figure><ol start="9"><li>who 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">who</span>                  显示当前登录系统的用户</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">who</span>  <span class="token parameter variable">-H</span>              显示明细<span class="token punctuation">(</span>标题<span class="token punctuation">)</span>信息</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#例如</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># who</span></pre></td></tr><tr><td data-num="6"></td><td><pre>root     pts/0        <span class="token number">2024</span>-03-25 <span class="token number">16</span>:24 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.44<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># who -H</span></pre></td></tr><tr><td data-num="8"></td><td><pre>名称   线路       时间           备注</pre></td></tr><tr><td data-num="9"></td><td><pre>root     pts/0        <span class="token number">2024</span>-03-25 <span class="token number">16</span>:24 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.44<span class="token punctuation">)</span></pre></td></tr></table></figure><ol start="10"><li>timedatectl 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>timedatectl status                          显示系统的当前时间和日期</pre></td></tr><tr><td data-num="2"></td><td><pre>timedatectl list-timezones                  查看所有可用的时区</pre></td></tr><tr><td data-num="3"></td><td><pre>timedatectl set-timezones  <span class="token string">"ASia/ShangHai"</span>  设置本地时区</pre></td></tr><tr><td data-num="4"></td><td><pre>timedatectl set-ntp <span class="token boolean">false</span>                   禁止时间同步</pre></td></tr><tr><td data-num="5"></td><td><pre>timedatectl set-time <span class="token string">"2019-03-11 20:45:00"</span>  设置时间</pre></td></tr><tr><td data-num="6"></td><td><pre>timedatectl set-ntp <span class="token boolean">true</span>                    启用时间同步</pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#例如</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># timedatectl status</span></pre></td></tr><tr><td data-num="10"></td><td><pre>      Local time: 一 <span class="token number">2024</span>-03-25 <span class="token number">19</span>:34:55 CST</pre></td></tr><tr><td data-num="11"></td><td><pre>  Universal time: 一 <span class="token number">2024</span>-03-25 <span class="token number">11</span>:34:55 UTC</pre></td></tr><tr><td data-num="12"></td><td><pre>        RTC time: 一 <span class="token number">2024</span>-03-25 <span class="token number">11</span>:34:58</pre></td></tr><tr><td data-num="13"></td><td><pre>       Time zone: Asia/Shanghai <span class="token punctuation">(</span>CST, +0800<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>     NTP enabled: <span class="token function">yes</span></pre></td></tr><tr><td data-num="15"></td><td><pre>NTP synchronized: no</pre></td></tr><tr><td data-num="16"></td><td><pre> RTC <span class="token keyword">in</span> <span class="token builtin class-name">local</span> TZ: no</pre></td></tr><tr><td data-num="17"></td><td><pre>      DST active: n/a</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># timedatectl list-timezones</span></pre></td></tr><tr><td data-num="19"></td><td><pre>Africa/Abidjan</pre></td></tr><tr><td data-num="20"></td><td><pre>Africa/Accra</pre></td></tr><tr><td data-num="21"></td><td><pre>Africa/Addis_Ababa</pre></td></tr><tr><td data-num="22"></td><td><pre>Africa/Algiers</pre></td></tr><tr><td data-num="23"></td><td><pre>Africa/Asmara</pre></td></tr></table></figure><ol start="11"><li>clear 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">clear</span>       清除当前的屏幕,实际上是之前的内容,顶出屏幕外</pre></td></tr></table></figure><ol start="12"><li>ping 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">ping</span>  网址/IP地址</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">ping</span>  - c 次数   网址/IP地址</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#例如</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ping 192.168.0.44</span></pre></td></tr><tr><td data-num="6"></td><td><pre>PING <span class="token number">192.168</span>.0.44 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.44<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.</pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.44: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.386</span> ms</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.44: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.300</span> ms</pre></td></tr><tr><td data-num="9"></td><td><pre>^C <span class="token comment">#手动 ctrl+c 结束 </span></pre></td></tr><tr><td data-num="10"></td><td><pre>--- <span class="token number">192.168</span>.0.44 <span class="token function">ping</span> statistics ---</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token number">2</span> packets transmitted, <span class="token number">2</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 1000ms</pre></td></tr><tr><td data-num="12"></td><td><pre>rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.300</span>/0.343/0.386/0.043 ms</pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># ping -c 1 192.168.0.44</span></pre></td></tr><tr><td data-num="14"></td><td><pre>PING <span class="token number">192.168</span>.0.44 <span class="token punctuation">(</span><span class="token number">192.168</span>.0.44<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.</pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.44: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.540</span> ms</pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre>--- <span class="token number">192.168</span>.0.44 <span class="token function">ping</span> statistics ---</pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">1</span> packets transmitted, <span class="token number">1</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 0ms</pre></td></tr><tr><td data-num="19"></td><td><pre>rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.540</span>/0.540/0.540/0.000 ms</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr></table></figure><ol start="13"><li>telnet 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>telnet <span class="token function">ip</span> 端口       测试指定ip的端口是否可以连通</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#列如</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#不能连通的情况</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># telnet 192.168.0.44 8888</span></pre></td></tr><tr><td data-num="6"></td><td><pre>Trying <span class="token number">192.168</span>.0.44<span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="7"></td><td><pre>telnet: connect to address <span class="token number">192.168</span>.0.44: Connection refused</pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token comment">#能连通的情况</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># telnet 192.168.0.44 3306</span></pre></td></tr><tr><td data-num="10"></td><td><pre>Trying <span class="token number">192.168</span>.0.44<span class="token punctuation">..</span>.</pre></td></tr><tr><td data-num="11"></td><td><pre>Connected to <span class="token number">192.168</span>.0.44.</pre></td></tr><tr><td data-num="12"></td><td><pre>Escape character is <span class="token string">'^]'</span><span class="token builtin class-name">.</span></pre></td></tr><tr><td data-num="13"></td><td><pre>N</pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token number">5.7</span>.29-logml_p5<span class="token comment">#dG7!k</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">;</span>Wmysql_native_password</pre></td></tr></table></figure><ol start="14"><li>netstat 命令</li></ol><p><strong><span class="exturl" data-url="aHR0cHM6Ly9oYWljb2Rlci5uZXQvbGludXgvbGludXgtdHV0b3JpYWwuaHRtbA==">Linux</span></strong> 中的 netstat 命令用于显示与 IP、TCP、UDP 和 ICMP 协议相关的统计数据，一般用于检验本机各端口的网络连接情况。netstat 是在内核中访问网络及相关信息的程序，它能提供 TCP 连接，TCP 和 UDP 监听，进程内存管理的相关报告。</p><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">netstat</span>  <span class="token parameter variable">-a</span>   显示详细的连接状况</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">netstat</span>  <span class="token parameter variable">-i</span>   显示网卡列表</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">#结合 grep 命令</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">netstat</span> <span class="token parameter variable">-ap</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token function">ssh</span>        找出程序运行的端口</pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token function">netstat</span> <span class="token parameter variable">-anpt</span> <span class="token operator">|</span> <span class="token function">grep</span> <span class="token string">':8888'</span>  找出运行在指定端口的进程</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token comment">#列如</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># netstat -anpt | grep ':8888'</span></pre></td></tr><tr><td data-num="9"></td><td><pre>tcp6       <span class="token number">0</span>      <span class="token number">0</span> :::8888                 :::*                    LISTEN      <span class="token number">159011</span>/java</pre></td></tr></table></figure><ol start="15"><li>ifconfig</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="2"></td><td><pre>    <span class="token function">ifconfig</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">ifconfig</span>  网卡名称  down</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">ifconfig</span>  网卡名称  up</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">ifconfig</span>  网卡名称  ip地址</pre></td></tr><tr><td data-num="6"></td><td><pre>    <span class="token function">ifconfig</span>  网卡名称  ip地址   netmask  子网掩码</pre></td></tr><tr><td data-num="7"></td><td><pre>        </pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">ifconfig</span>                        显示激活的网卡信息</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">ifconfig</span>  ens37  down           关闭网卡 ens37</pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">ifconfig</span>  ens37  up             启动网卡 ens37</pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">ifconfig</span>  ens37  <span class="token number">192.168</span>.0.44  配置网卡 ens37 的IP地址</pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">ifconfig</span>  ens37  <span class="token number">192.168</span>.0.44  netmask  <span class="token number">255.255</span>.255.0   配置网卡 ens37 的IP地址 和 子网掩码</pre></td></tr></table></figure><p>​</p><ol start="16"><li>lsblk 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>lsblk      列出硬盘的使用情况</pre></td></tr><tr><td data-num="2"></td><td><pre>lsblk  <span class="token parameter variable">-f</span>  显示系统信息</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token comment">#例如</span></pre></td></tr><tr><td data-num="5"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># lsblk</span></pre></td></tr><tr><td data-num="6"></td><td><pre>NAME          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</pre></td></tr><tr><td data-num="7"></td><td><pre>sda             <span class="token number">8</span>:0    <span class="token number">0</span>   931G  <span class="token number">0</span> disk </pre></td></tr><tr><td data-num="8"></td><td><pre>├─sda1          <span class="token number">8</span>:1    <span class="token number">0</span>   200M  <span class="token number">0</span> part /boot/efi</pre></td></tr><tr><td data-num="9"></td><td><pre>├─sda2          <span class="token number">8</span>:2    <span class="token number">0</span>     1G  <span class="token number">0</span> part /boot</pre></td></tr><tr><td data-num="10"></td><td><pre>└─sda3          <span class="token number">8</span>:3    <span class="token number">0</span> <span class="token number">929</span>.8G  <span class="token number">0</span> part </pre></td></tr><tr><td data-num="11"></td><td><pre>  ├─nlas-root <span class="token number">253</span>:0    <span class="token number">0</span>    50G  <span class="token number">0</span> lvm  /</pre></td></tr><tr><td data-num="12"></td><td><pre>  ├─nlas-swap <span class="token number">253</span>:1    <span class="token number">0</span>   <span class="token number">7</span>.8G  <span class="token number">0</span> lvm  <span class="token punctuation">[</span>SWAP<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="13"></td><td><pre>  └─nlas-home <span class="token number">253</span>:2    <span class="token number">0</span>   872G  <span class="token number">0</span> lvm  /home</pre></td></tr><tr><td data-num="14"></td><td><pre>sr0            <span class="token number">11</span>:0    <span class="token number">1</span>  1024M  <span class="token number">0</span> rom  </pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment">#</span></pre></td></tr></table></figure><ol start="16"><li>df 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">df</span>             显示整个硬盘的使用情况</pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">df</span>  文件夹      显示文件夹的使用情况</pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">df</span>  <span class="token parameter variable">--total</span>    显示所有的信息</pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token function">df</span>   <span class="token parameter variable">-h</span>        将结果变成KB,MB,GB形式展示,利用阅读</pre></td></tr></table></figure><ol start="18"><li>vmstat 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">##vmstat 是 Virtual Meomory Statistics（虚拟内存统计）的缩写，可对操作系统的虚拟内存、进程、IO 读写、CPU 活动等进行监视，在某系统中输入 vmstat 命令之后显示结果如下所示：</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@host-19-112-71-216 ~<span class="token punctuation">]</span><span class="token comment"># vmstat</span></pre></td></tr><tr><td data-num="4"></td><td><pre>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</pre></td></tr><tr><td data-num="5"></td><td><pre> r  b   swpd   <span class="token function">free</span>   buff  cache   si   so    bi    bo   <span class="token keyword">in</span>   cs us sy <span class="token function">id</span> wa st</pre></td></tr><tr><td data-num="6"></td><td><pre> <span class="token number">0</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">56813440</span> <span class="token number">211328</span> <span class="token number">4271232</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">1</span>     <span class="token number">1</span>   <span class="token number">12</span>    <span class="token number">7</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr><tr><td data-num="7"></td><td><pre> </pre></td></tr><tr><td data-num="8"></td><td><pre>指标解读如下：</pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre>    memory</pre></td></tr><tr><td data-num="11"></td><td><pre></pre></td></tr><tr><td data-num="12"></td><td><pre>（1）swpd ：如果 swap 的值不为 <span class="token number">0</span>，或者比较大，比如超过 <span class="token number">100</span> MB ，但是 si 和 so 的值长期为 <span class="token number">0</span>，这种情况不会影响系统性能。</pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre>（2）free ：空闲内存 <span class="token punctuation">(</span>free<span class="token punctuation">)</span> 很少或接近于 <span class="token number">0</span> 时，并不能认定为内存不够用，Linux 是抢占内存的 OS，还要结合 si 和 so；如果 <span class="token function">free</span> 很少，si 和 so 也很少（大多时候是 <span class="token number">0</span>），系统性能在这种情况下不会受到影响。</pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre>（3）cache ：如果 cache 的值大的时候，说明 cache 处的文件数多，如果频繁访问到的文件都能被 cache，那么磁盘读 IO 的 bi 会非常小。</pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre>    swap：内存够用的时候，si 和 so 这 <span class="token number">2</span> 个值都是 <span class="token number">0</span>，如果这两个个值长期大于 <span class="token number">0</span> ，系统性能会受到影响，磁盘 IO 和 CPU 资源都会被消耗。</pre></td></tr><tr><td data-num="19"></td><td><pre>    </pre></td></tr><tr><td data-num="20"></td><td><pre> </pre></td></tr><tr><td data-num="21"></td><td><pre>CPU 是计算机系统的大脑，其重要性不可置否。在性能优化的过程中，CPU 的性能指标是很重要的。本节主要介绍 CPU 性能分析命令，以及 CPU 性能分析方法。</pre></td></tr><tr><td data-num="22"></td><td><pre>CPU 以百分比显示，用户进程执行时间 <span class="token number">2</span>%，系统进程执行时间 <span class="token number">1</span>% ，空闲时间 <span class="token number">97</span>% ，等待 IO 时间 <span class="token number">0</span>%，被偷走的 CPU 时间所占百分比 <span class="token number">0</span>%。us + sy + <span class="token function">id</span> + wa <span class="token operator">=</span><span class="token number">100</span>%，近似为 <span class="token number">100</span>%。</pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token comment">## 使用 vmstat 检测，每隔 1 秒刷新一次，共刷新 5 次。</span></pre></td></tr><tr><td data-num="25"></td><td><pre><span class="token function">vmstat</span> <span class="token number">1</span> <span class="token number">5</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">[</span>root@host-19-112-71-216 ~<span class="token punctuation">]</span><span class="token comment"># vmstat 1 5</span></pre></td></tr><tr><td data-num="27"></td><td><pre>procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----</pre></td></tr><tr><td data-num="28"></td><td><pre> r  b   swpd   <span class="token function">free</span>   buff  cache   si   so    bi    bo   <span class="token keyword">in</span>   cs us sy <span class="token function">id</span> wa st</pre></td></tr><tr><td data-num="29"></td><td><pre> <span class="token number">1</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">56810752</span> <span class="token number">211328</span> <span class="token number">4271360</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">1</span>     <span class="token number">1</span>   <span class="token number">12</span>    <span class="token number">7</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr><tr><td data-num="30"></td><td><pre> <span class="token number">0</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">56809600</span> <span class="token number">211328</span> <span class="token number">4271360</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>     <span class="token number">0</span>  <span class="token number">455</span>  <span class="token number">817</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr><tr><td data-num="31"></td><td><pre> <span class="token number">0</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">56809664</span> <span class="token number">211328</span> <span class="token number">4271360</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>     <span class="token number">0</span>  <span class="token number">449</span>  <span class="token number">818</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr><tr><td data-num="32"></td><td><pre> <span class="token number">0</span>  <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">56809664</span> <span class="token number">211328</span> <span class="token number">4271360</span>    <span class="token number">0</span>    <span class="token number">0</span>     <span class="token number">0</span>     <span class="token number">0</span>  <span class="token number">474</span>  <span class="token number">866</span>  <span class="token number">0</span>  <span class="token number">0</span> <span class="token number">100</span>  <span class="token number">0</span>  <span class="token number">0</span></pre></td></tr><tr><td data-num="33"></td><td><pre></pre></td></tr><tr><td data-num="34"></td><td><pre>指标解读如下：</pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token number">1</span>. Procs</pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>    r：如果在 procs 中运行的序列 <span class="token punctuation">(</span>processr<span class="token punctuation">)</span> 是连续的大于在系统中的 CPU 的个数，表示 CPU 比较忙，系统现在运行比较慢，有多数的进程等待 CPU。如果 r 的输出数大于系统中可用 CPU 个数的 <span class="token number">4</span> 倍，则系统面临着 CPU 短缺的问题，或者是 CPU 的速率过低，系统中有多数的进程在等待 CPU，造成系统中进程运行过慢。</pre></td></tr><tr><td data-num="38"></td><td><pre>    b：在 procs 中运行的序列 <span class="token punctuation">(</span>processb<span class="token punctuation">)</span>，即处于不可中断状态的进程数，如果连续为 CPU 的 <span class="token number">2</span>~3 倍，就表明 CPU 排队比较严重。</pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre>如果 r 连续大于 CPU 的个数，甚至是 CPU 个数的几倍；b 也持续有值，甚至是 CPU 的 <span class="token number">2</span>~3 倍，并且 <span class="token function">id</span> 也持续小于 <span class="token number">50</span>%，wa 也比较小，这就表明 CPU 负荷很严重。</pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre><span class="token number">2</span>. SYSTEM</pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre>    in：每秒产生的中断次数。</pre></td></tr><tr><td data-num="45"></td><td><pre>    cs：每秒产生的上下文切换次数。</pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">in</span> 和 cs 这两个值越大，由内核消耗的 CPU 时间会越大。</pre></td></tr><tr><td data-num="48"></td><td><pre></pre></td></tr><tr><td data-num="49"></td><td><pre><span class="token number">3</span>. CPU</pre></td></tr><tr><td data-num="50"></td><td><pre></pre></td></tr><tr><td data-num="51"></td><td><pre>    us：用户进程消耗的 CPU 时间百分比。us 的值比较高时，说明用户进程消耗的 CPU 时间多，在服务高峰期持续大于 <span class="token number">50</span>~60，是可以接受的范围，但是如果长期超过 <span class="token number">50</span>% ，就需要考虑优化程序算法。</pre></td></tr><tr><td data-num="52"></td><td><pre>    sy：内核进程消耗的 CPU 时间百分比。sy 的值比较高时，说明系统内核消耗的 CPU 资源多，对于这种非良性表现需要检查原因。</pre></td></tr><tr><td data-num="53"></td><td><pre>    wa：IO 等待消耗的 CPU 时间百分比。wa 的值比较高时，说明 IO 等待比较严重，可能是由于磁盘大量做随机访问造成的，也有可能是磁盘出现了瓶颈（块操作）。</pre></td></tr><tr><td data-num="54"></td><td><pre>    id：CPU 处于空闲状态时间百分比，如果空闲时间 <span class="token punctuation">(</span>cpu <span class="token function">id</span><span class="token punctuation">)</span> 持续为 <span class="token number">0</span> 并且系统时间 <span class="token punctuation">(</span>cpu sy<span class="token punctuation">)</span> 是用户时间的两倍 <span class="token punctuation">(</span>cpu us<span class="token punctuation">)</span> ，系统则面临着 CPU 资源的短缺，如果在服务高峰期持续小于 <span class="token number">50</span>，是可以接受的范围。</pre></td></tr><tr><td data-num="55"></td><td><pre></pre></td></tr><tr><td data-num="56"></td><td><pre>除此之外，还可以用以下方法分析 CPU 性能：</pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre>    观察 CPU 的使用率和 CPU 运行进程队列长度及负载，可以使用命令：sar <span class="token parameter variable">-u</span> <span class="token number">1</span> <span class="token number">5</span>、sar <span class="token parameter variable">-q</span> <span class="token number">1</span> <span class="token number">5</span>。</pre></td></tr><tr><td data-num="59"></td><td><pre>    查看具体是什么进程在消耗 CPU，可以使用命令：top、ps -auxw<span class="token operator">|</span>more。</pre></td></tr><tr><td data-num="60"></td><td><pre>    知道了某个进程消耗大量的 CPU，想了解该进程详细内容，可以使用命令：strace。</pre></td></tr></table></figure><ol start="19"><li>ethtool 命令（网络相关）</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#使用 ethtool 命令可以查看指定网口对应的网络传输速率</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token function">ethtool</span> ens33</pre></td></tr><tr><td data-num="3"></td><td><pre></pre></td></tr><tr><td data-num="4"></td><td><pre>结果解读：</pre></td></tr><tr><td data-num="5"></td><td><pre></pre></td></tr><tr><td data-num="6"></td><td><pre>    Supported <span class="token function">link</span> modes 为网卡支持的连接模式。</pre></td></tr><tr><td data-num="7"></td><td><pre>    speed 和 duplex 字段为当前网络速率和模式。</pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre>-----分析方法</pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre>    使用 <span class="token function">ping</span> 命令测试网络的连通性和响应时间。</pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token function">ping</span> 发送 ICMP <span class="token builtin class-name">echo</span> 数据包来探测网络的连通性，除了能直观地看出网络的连通状况外，还能获得本次连接的往返时间（RTT 时间），丢包情况，以及访问的域名所对应的 IP 地址（使用 DNS 域名解析）。</pre></td></tr><tr><td data-num="14"></td><td><pre></pre></td></tr><tr><td data-num="15"></td><td><pre></pre></td></tr><tr><td data-num="16"></td><td><pre><span class="token function">ping</span> <span class="token parameter variable">-c</span> <span class="token number">4</span> baidu.com</pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token comment">## 参数 -c 表示指定发包数。</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">[</span>root@host-19-112-71-216 ~<span class="token punctuation">]</span><span class="token comment"># ping -c 4 192.168.0.77</span></pre></td></tr><tr><td data-num="19"></td><td><pre>PING <span class="token number">19.112</span>.71.9 <span class="token punctuation">(</span><span class="token number">19.112</span>.71.9<span class="token punctuation">)</span> <span class="token number">56</span><span class="token punctuation">(</span><span class="token number">84</span><span class="token punctuation">)</span> bytes of data.</pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.77: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">1</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.335</span> ms</pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.77: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">2</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.270</span> ms</pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.77: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">3</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.642</span> ms</pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token number">64</span> bytes from <span class="token number">192.168</span>.0.77: <span class="token assign-left variable">icmp_seq</span><span class="token operator">=</span><span class="token number">4</span> <span class="token assign-left variable">ttl</span><span class="token operator">=</span><span class="token number">64</span> <span class="token assign-left variable">time</span><span class="token operator">=</span><span class="token number">0.165</span> ms</pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre>--- <span class="token number">192.168</span>.0.77 <span class="token function">ping</span> statistics ---</pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token number">4</span> packets transmitted, <span class="token number">4</span> received, <span class="token number">0</span>% packet loss, <span class="token function">time</span> 3052ms</pre></td></tr><tr><td data-num="27"></td><td><pre>rtt min/avg/max/mdev <span class="token operator">=</span> <span class="token number">0.165</span>/0.353/0.642/0.177 ms</pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre>解析到 <span class="token number">192.168</span>.0.77 的一台服务器 IP 地址为 <span class="token number">192.168</span>.0.77。RTT 时间的最小、平均、最大和算术平均差分别是 <span class="token number">0</span>.165ms、0.353ms、0.642ms 和 <span class="token number">0</span>.177ms。</pre></td></tr><tr><td data-num="30"></td><td><pre></pre></td></tr><tr><td data-num="31"></td><td><pre>    使用 sar 命令测试网络带宽。</pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre>sar 命令使用 <span class="token parameter variable">-n</span> 选项可以汇报网络相关信息。</pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre>sar <span class="token parameter variable">-n</span> DEV <span class="token number">1</span> <span class="token number">3</span></pre></td></tr><tr><td data-num="36"></td><td><pre></pre></td></tr><tr><td data-num="37"></td><td><pre>在某系统中输入此命令之后显示结果如下所示</pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>在上图中可以看到每秒钟接收到的包数目为 <span class="token number">1</span>，每秒钟发送出去的包数目为 <span class="token number">1</span>，每秒钟接收到的字节数为 <span class="token number">0.06</span>，每秒钟发送出去的字节数为 <span class="token number">0.19</span>，每秒钟接收到的压缩包数目为 <span class="token number">0</span>，每秒钟接收到的多播包的包数目为 <span class="token number">0</span>。通过这些参数可以对网络带宽有更好的了解。</pre></td></tr></table></figure><h2 id="十六-其他命令"><a class="anchor" href="#十六-其他命令">#</a> 十六、其他命令</h2><ol><li>压缩和解压</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#gzip   压缩文件变成 gz 格式</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">gzip</span>   文件名称</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token function">gzip</span>   *</pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">gzip</span>   <span class="token parameter variable">-dv</span>  文件名称</pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">gzip</span>  aa.txt    压缩文件 aa.txt 压缩之后,文件 aa.txt 将会消失, 同时产生一个文件 名称叫做 aa.txt.gz</pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">gzip</span>  *         压缩当前文件夹下面所有的文件和目录</pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token function">gzip</span>  <span class="token parameter variable">-dv</span>  bb.txt.gz    解压文件 bb.txt.gz  解压之后,文件 bb.txt.gz 将会消失, 同时产生一个文件 名称叫做 bb.txt 并且给出了解压信息</pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">#列如：</span></pre></td></tr><tr><td data-num="12"></td><td><pre></pre></td></tr><tr><td data-num="13"></td><td><pre></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token comment">#gunzip  解压缩 gz 格式的文件</span></pre></td></tr><tr><td data-num="15"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="16"></td><td><pre>    gunzip  压缩文件的名称</pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="19"></td><td><pre>    gunzip  aa.txt.gz    解压文件 aa.txt.gz  解压之后,文件 aa.txt.gz 会消失。 同时出现文件  aa.txt</pre></td></tr><tr><td data-num="20"></td><td><pre></pre></td></tr><tr><td data-num="21"></td><td><pre></pre></td></tr><tr><td data-num="22"></td><td><pre><span class="token comment">#tar     压缩或解压 gz 格式文件</span></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token comment">#解压</span></pre></td></tr><tr><td data-num="24"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-zcvf</span>  压缩文件名称   文件名称或者文件夹名称</pre></td></tr><tr><td data-num="26"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-ztvf</span>  压缩文件名称</pre></td></tr><tr><td data-num="27"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-zxvf</span>  压缩文件名称</pre></td></tr><tr><td data-num="28"></td><td><pre></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token comment">#压缩</span></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="31"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-zcvf</span>  bbb.gz   aaa        压缩目录文件夹 aaa 压缩之后, 压缩文件的名称叫做 bbb.gz</pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-ztvf</span>  bbb.gz              查看压缩文件 bbb.gz 当中存在文件或者目录文件夹</pre></td></tr><tr><td data-num="33"></td><td><pre>    <span class="token function">tar</span>  <span class="token parameter variable">-zxvf</span>  bbb.gz              解压压缩文件 bbb.gz 解压之后, 目录名称叫做 bbb</pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre><span class="token comment">#zip</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="38"></td><td><pre>    <span class="token function">zip</span>   <span class="token parameter variable">-q</span>   <span class="token parameter variable">-r</span>   压缩之后文件的名称   需要压缩的文件夹</pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="41"></td><td><pre>    <span class="token function">zip</span>  <span class="token parameter variable">-q</span>  <span class="token parameter variable">-r</span>  aaa.zip  bbb   将bbb文件夹,压缩成为 aaa.zip 文件</pre></td></tr><tr><td data-num="42"></td><td><pre></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre><span class="token comment">#unzip</span></pre></td></tr><tr><td data-num="46"></td><td><pre><span class="token number">1</span>. 语法:</pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token function">unzip</span>  <span class="token parameter variable">-l</span>  压缩文件的名称</pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token function">unzip</span>  <span class="token parameter variable">-d</span>  压缩文件的名称</pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre><span class="token number">2</span>. 说明:</pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token function">unzip</span>  <span class="token parameter variable">-l</span>  aaa.zip   查看压缩文件里面的文件信息</pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token function">unzip</span>  <span class="token parameter variable">-d</span>  aaa.zip   解压文件 aaa.zip</pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token number">3</span>. 备注:</pre></td></tr><tr><td data-num="55"></td><td><pre>    需要注意一点, <span class="token function">unzip</span> 只能解压 <span class="token string">"zip"</span> 扩展名称的压缩文件</pre></td></tr></table></figure><ol start="2"><li>后台运行命令 nohup COMMAND &amp;</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#在其他命名结尾出加 '&amp;'</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">#列如：</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">nohup</span> <span class="token function">cp</span> <span class="token parameter variable">-r</span> a b <span class="token operator">&amp;</span></pre></td></tr></table></figure><ol start="3"><li><p>nohup</p></li><li><p>watch -n 1 &quot;lvs -o+devices&quot;</p></li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">watch</span> <span class="token parameter variable">-n</span> <span class="token number">1</span> <span class="token string">"lvs -o+devices"</span></pre></td></tr></table></figure><ol start="5"><li>查看监控系统日志：</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre>监控系统日志：查看系统日志 <span class="token punctuation">(</span>/var/log/messages, /var/log/syslog 或 /var/log/syslog.log</pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token function">tail</span> <span class="token parameter variable">-f</span> /var/log/messages</pre></td></tr></table></figure><ol start="6"><li>lsblk 命令</li></ol><figure class="highlight shell"><figcaption data-lang="Bash"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">#lsblk 指令主要用于展示块设备（block devices）的信息</span></pre></td></tr><tr><td data-num="2"></td><td><pre></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token punctuation">[</span>root@localhost ~<span class="token punctuation">]</span><span class="token comment"># lsblk</span></pre></td></tr><tr><td data-num="4"></td><td><pre>NAME          MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT</pre></td></tr><tr><td data-num="5"></td><td><pre>sda             <span class="token number">8</span>:0    <span class="token number">0</span>   931G  <span class="token number">0</span> disk </pre></td></tr><tr><td data-num="6"></td><td><pre>├─sda1          <span class="token number">8</span>:1    <span class="token number">0</span>   200M  <span class="token number">0</span> part /boot/efi</pre></td></tr><tr><td data-num="7"></td><td><pre>├─sda2          <span class="token number">8</span>:2    <span class="token number">0</span>     1G  <span class="token number">0</span> part /boot</pre></td></tr><tr><td data-num="8"></td><td><pre>└─sda3          <span class="token number">8</span>:3    <span class="token number">0</span> <span class="token number">929</span>.8G  <span class="token number">0</span> part </pre></td></tr><tr><td data-num="9"></td><td><pre>  ├─nlas-root <span class="token number">253</span>:0    <span class="token number">0</span>    50G  <span class="token number">0</span> lvm  /</pre></td></tr><tr><td data-num="10"></td><td><pre>  ├─nlas-swap <span class="token number">253</span>:1    <span class="token number">0</span>   <span class="token number">7</span>.8G  <span class="token number">0</span> lvm  <span class="token punctuation">[</span>SWAP<span class="token punctuation">]</span></pre></td></tr><tr><td data-num="11"></td><td><pre>  └─nlas-home <span class="token number">253</span>:2    <span class="token number">0</span>   872G  <span class="token number">0</span> lvm  /home</pre></td></tr><tr><td data-num="12"></td><td><pre>sr0            <span class="token number">11</span>:0    <span class="token number">1</span>  1024M  <span class="token number">0</span> rom</pre></td></tr></table></figure><div class="tags"><a href="/tzblog/tags/linux/" rel="tag"><i class="ic i-tag"></i> linux</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-04-23 00:44:24" itemprop="dateModified" datetime="2024-04-23T00:44:24+08:00">2024-04-23</time> </span><span id="2024/03/21/computer-science/system/linux/Linux/" class="item leancloud_visitors" data-flag-title="Linux 使用" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/tzblog/images/wechatpay.png" alt="Tz 微信支付"><p>微信支付</p></div><div><img data-src="/tzblog/images/alipay.png" alt="Tz 支付宝"><p>支付宝</p></div><div><img data-src="/tzblog/images/paypal.png" alt="Tz 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Tz <i class="ic i-at"><em>@</em></i>一些记录</li><li class="link"><strong>本文链接：</strong> <a href="https://mytingting.gitee.io/tzblog/2024/03/21/computer-science/system/linux/Linux/" title="Linux 使用">https://mytingting.gitee.io/tzblog/2024/03/21/computer-science/system/linux/Linux/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/tzblog/2024/03/20/computer-science/dsa/topic/1636/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tzting.github.io&#x2F;images&#x2F;sky6.jpg" title="每日一题-按照频率将数组升序排序"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 每日一题</span><h3>每日一题-按照频率将数组升序排序</h3></a></div><div class="item right"><a href="/tzblog/2024/03/21/computer-science/system/windows/windows/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tzting.github.io&#x2F;images&#x2F;sky7.jpg" title="window 使用"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 系统</span><h3>window 使用</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#linux-%E4%BD%BF%E7%94%A8"><span class="toc-number">1.</span> <span class="toc-text">Linux 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.</span> <span class="toc-text">一、介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-vi-vim-%E4%BD%BF%E7%94%A8"><span class="toc-number">1.2.</span> <span class="toc-text">二、VI &#x2F; VIM 使用</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5vi"><span class="toc-number">1.2.1.</span> <span class="toc-text">进入 vi</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%87%E6%8D%A2%E8%87%B3%E6%8F%92%E5%85%A5%E6%A8%A1%E5%BC%8Finsert-mode%E7%BC%96%E8%BE%91%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.2.</span> <span class="toc-text">切换至插入模式（Insert mode）编辑文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#insert-%E7%9A%84%E5%88%87%E6%8D%A2"><span class="toc-number">1.2.3.</span> <span class="toc-text">Insert 的切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%80%E5%87%BAvi%E5%8F%8A%E4%BF%9D%E5%AD%98%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.4.</span> <span class="toc-text">退出 vi 及保存文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%A1%8C%E6%A8%A1%E5%BC%8Fcommand-mode%E5%8A%9F%E8%83%BD%E9%94%AE"><span class="toc-number">1.2.5.</span> <span class="toc-text">命令行模式（command mode）功能键</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#last-line-mode%E4%B8%8B%E5%91%BD%E4%BB%A4%E7%AE%80%E4%BB%8B"><span class="toc-number">1.2.6.</span> <span class="toc-text">Last line mode 下命令简介</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#vi%E5%91%BD%E4%BB%A4%E5%88%97%E8%A1%A8"><span class="toc-number">1.2.7.</span> <span class="toc-text">vi 命令列表</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%89-%E4%BD%BF%E7%94%A8%E7%89%A9%E7%90%86%E5%8D%B7pv-%E9%80%BB%E8%BE%91%E5%8D%B7lv-%E5%8D%B7%E7%BB%84vg%E7%AE%A1%E7%90%86%E7%AE%A1%E7%90%86%E7%9A%84%E6%96%B9%E5%BC%8F%E6%8C%82%E8%BD%BD%E7%A1%AC%E7%9B%98"><span class="toc-number">1.3.</span> <span class="toc-text">三、使用物理卷 (PV)、逻辑卷 (LV)、卷组 (VG) 管理管理的方式挂载硬盘</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9B%B8%E5%85%B3%E6%A6%82%E5%BF%B5"><span class="toc-number">1.3.1.</span> <span class="toc-text">相关概念</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E9%80%BB%E8%BE%91%E5%8D%B7"><span class="toc-number">1.3.2.</span> <span class="toc-text">为什么要使用逻辑卷</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%89%A9%E7%90%86%E5%8D%B7pv"><span class="toc-number">1.3.3.</span> <span class="toc-text">创建物理卷（PV）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-%E6%89%A9%E5%AE%B9%E5%8D%B7%E7%BB%84"><span class="toc-number">1.3.4.</span> <span class="toc-text">创建、扩容卷组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA-%E6%89%A9%E5%AE%B9%E9%80%BB%E8%BE%91%E5%8D%B7"><span class="toc-number">1.3.5.</span> <span class="toc-text">创建、扩容逻辑卷</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%9B-%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E8%AE%BE%E7%BD%AE"><span class="toc-number">1.4.</span> <span class="toc-text">四、虚拟内存设置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E5%A2%9E%E5%8A%A0"><span class="toc-number">1.4.1.</span> <span class="toc-text">1、增加</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%A0%E9%99%A4"><span class="toc-number">1.4.2.</span> <span class="toc-text">2、删除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E8%AE%BE%E7%BD%AE%E5%BC%80%E6%9C%BA%E8%87%AA%E5%8A%A8%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"><span class="toc-number">1.4.3.</span> <span class="toc-text">3、设置开机自动启动虚拟内存</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%94-ssh-scp"><span class="toc-number">1.5.</span> <span class="toc-text">五、ssh &#x2F;scp</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#ssh-root192168016"><span class="toc-number">1.5.1.</span> <span class="toc-text">ssh root@192.168.0.16</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%AD-%E5%86%85%E5%AD%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5%E6%80%A7%E8%83%BD"><span class="toc-number">1.6.</span> <span class="toc-text">六、内存使用情况 &#x2F; 性能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%83-cpu%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5%E6%80%A7%E8%83%BD"><span class="toc-number">1.7.</span> <span class="toc-text">七、CPU 使用情况 &#x2F; 性能</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B9%9D-%E7%A1%AC%E7%9B%98%E4%BD%BF%E7%94%A8%E6%83%85%E5%86%B5"><span class="toc-number">1.8.</span> <span class="toc-text">九、硬盘使用情况</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%AD%E6%B3%95"><span class="toc-number">1.8.1.</span> <span class="toc-text">语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">1.8.2.</span> <span class="toc-text">参数详解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%88%86%E6%9E%90"><span class="toc-number">1.8.3.</span> <span class="toc-text">性能分析</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81-dmesg%E5%91%BD%E4%BB%A4"><span class="toc-number">1.9.</span> <span class="toc-text">十、dmesg 命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E8%AF%AD%E6%B3%95"><span class="toc-number">1.9.1.</span> <span class="toc-text">命令语法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%89%E9%A1%B9%E8%AF%B4%E6%98%8E"><span class="toc-number">1.9.2.</span> <span class="toc-text">选项说明</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E4%B8%BE%E4%BE%8B"><span class="toc-number">1.9.3.</span> <span class="toc-text">应用举例</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%80-source"><span class="toc-number">1.10.</span> <span class="toc-text">十一、source</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%8C-%E6%96%87%E4%BB%B6%E6%96%87%E4%BB%B6%E5%A4%B9%E7%9B%B8%E5%85%B3"><span class="toc-number">1.11.</span> <span class="toc-text">十二、文件 &#x2F; 文件夹相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%B8%89-%E9%98%B2%E7%81%AB%E5%A2%99"><span class="toc-number">1.12.</span> <span class="toc-text">十三、防火墙</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%9B%9B-%E7%94%A8%E6%88%B7%E7%94%A8%E6%88%B7%E7%BB%84%E7%9B%B8%E5%85%B3"><span class="toc-number">1.13.</span> <span class="toc-text">十四、用户 &#x2F; 用户组相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E4%BA%94-%E7%B3%BB%E7%BB%9F%E7%AE%A1%E7%90%86%E7%9B%B8%E5%85%B3"><span class="toc-number">1.14.</span> <span class="toc-text">十五、系统管理相关</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%85%AD-%E5%85%B6%E4%BB%96%E5%91%BD%E4%BB%A4"><span class="toc-number">1.15.</span> <span class="toc-text">十六、其他命令</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/tzblog/2024/03/21/computer-science/system/windows/windows/" rel="bookmark" title="window 使用">window 使用</a></li><li class="active"><a href="/tzblog/2024/03/21/computer-science/system/linux/Linux/" rel="bookmark" title="Linux 使用">Linux 使用</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Tz" data-src="/tzblog/images/avatar.jpg"><p class="name" itemprop="name">Tz</p><div class="description" itemprop="description">君将自由, 我心亦然</div></div><nav class="state"><div class="item posts"><a href="/tzblog/archives/"><span class="count">34</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/tzblog/categories/"><span class="count">18</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tzblog/tags/"><span class="count">22</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL1R6VGluZw==" title="https:&#x2F;&#x2F;github.com&#x2F;TzTing"><i class="ic i-github"></i></span> <a href="/tzblog/2269472297@qq.com" title="2269472297@qq.com" class="item email"><i class="ic i-envelope"></i></a></div><ul class="menu"><li class="item"><a href="/tzblog/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/tzblog/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/tzblog/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/tzblog/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tzblog/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/tzblog/links/" rel="section"><i class="ic i-magic"></i>链接</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/tzblog/2024/03/20/computer-science/dsa/topic/1636/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/tzblog/2024/03/21/computer-science/system/windows/windows/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/middleware/" title="分类于 中间件">中间件</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/middleware/cache/" title="分类于 缓存">缓存</a></div><span><a href="/tzblog/2024/03/24/computer-science/middleware/cache/ehcache-1/" title="Ehcache">Ehcache</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/%E7%B3%BB%E7%BB%9F/" title="分类于 系统">系统</a></div><span><a href="/tzblog/2024/03/21/computer-science/system/linux/Linux/" title="Linux 使用">Linux 使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/databases/" title="分类于 数据库">数据库</a></div><span><a href="/tzblog/2024/04/20/computer-science/databases/sql-optimization/" title="通用sql优化">通用sql优化</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/dsa/" title="分类于 数据结构与算法">数据结构与算法</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/dsa/topic/" title="分类于 每日一题">每日一题</a></div><span><a href="/tzblog/2024/03/19/computer-science/dsa/topic/2671/" title="每日一题-频率跟踪器">每日一题-频率跟踪器</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/middleware/" title="分类于 中间件">中间件</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/middleware/message-queue/" title="分类于 消息队列">消息队列</a></div><span><a href="/tzblog/2024/03/24/computer-science/middleware/message-queue/rocketmq-1/" title="rocket消息队列">rocket消息队列</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/tool-install/" title="分类于 工具安装与使用">工具安装与使用</a></div><span><a href="/tzblog/2024/03/24/computer-science/tool-install/everything-install/" title="Everyting本地文件搜索引擎的安装与使用">Everyting本地文件搜索引擎的安装与使用</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/weblog/" title="分类于 个人博客">个人博客</a></div><span><a href="/tzblog/2024/03/19/computer-science/weblog/hexo_dep/" title="Hexo部署个人博客">Hexo部署个人博客</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/databases/" title="分类于 数据库">数据库</a></div><span><a href="/tzblog/2024/03/24/computer-science/databases/mysql/" title="mysql数据库">mysql数据库</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/Program-language/" title="分类于 编程语言">编程语言</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/Program-language/java/" title="分类于 Java">Java</a></div><span><a href="/tzblog/2024/03/24/computer-science/program-language/java/java-1/" title="java编程语言">java编程语言</a></span></li><li class="item"><div class="breadcrumb"><a href="/tzblog/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/tzblog/categories/computer-science/databases/" title="分类于 数据库">数据库</a></div><span><a href="/tzblog/2024/03/24/computer-science/databases/dm/" title="达梦数据库">达梦数据库</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2023 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">Tz @ Tz</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">184k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">2:48</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"2024/03/21/computer-science/system/linux/Linux/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/tzblog/js/app.js?v=0.2.5"></script></body></html><!-- rebuild by hrmmi -->